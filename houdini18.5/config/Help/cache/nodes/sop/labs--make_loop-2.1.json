{"body": [{"indent": 0, "text": ["Labs Make Loop"], "type": "title", "extent": [0, 19], "level": 0}, {"indent": 0, "type": "summary", "extent": [137, 202], "text": [" Takes a mesh or volume that is animated and loops them. "]}, {"indent": 0, "type": "para", "extent": [202, 271], "text": ["This node will make either a mesh, volume or particle effect loop. "]}, {"indent": 0, "type": "para", "extent": [271, 411], "text": ["The general idea is that it will offset the animation by half of the timeline and then do a sinewave to blend between the two animations. "]}, {"indent": 0, "type": "para", "extent": [411, 542], "text": ["This will work with meshes with constant topology or volumes, or with particles coming out of a popnet with the right attributes."]}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [548, 594], "text": [{"text": "", "fullpath": "/images/make_loop_before.gif", "scheme": "Image", "type": "link", "value": "/images/make_loop_before.gif"}]}, {"indent": 4, "type": "para", "extent": [594, 637], "text": ["Mesh sequence before looping applied "]}], "indent": 0, "role": "item", "extent": [542, 548], "container": true, "type": "col"}, {"body": [{"indent": 4, "type": "para", "extent": [643, 684], "text": [{"text": "", "fullpath": "/images/make_loop_after.gif", "scheme": "Image", "type": "link", "value": "/images/make_loop_after.gif"}]}, {"indent": 4, "type": "para", "extent": [684, 726], "text": ["Mesh sequence after looping applied "]}], "indent": 0, "role": "item", "extent": [637, 643], "container": true, "type": "col"}], "container": true, "role": "item_group", "type": "col_group"}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [732, 1076], "text": ["If you set the time range too short for particles, all particles will be removed before looping; You will therefore have to modify their lifespan settings accordingly. You need the following point attributes from an input particle system to get it to work: \"id\", \"age\", \"life\", and \"pscale\" (it will be created for you if it is missing)."]}], "indent": 0, "role": "item", "extent": [726, 732], "container": true, "type": "note"}], "container": true, "role": "item_group", "type": "note_group"}, {"body": [{"body": [{"body": [{"indent": 8, "type": "para", "extent": [1105, 1149], "text": ["First frame of the input animation."]}], "indent": 4, "text": ["Start Frame"], "role": "item", "extent": [1088, 1105], "container": true, "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [1164, 1207], "text": ["Last frame of the input animation."]}], "indent": 4, "text": ["End Frame"], "role": "item", "extent": [1149, 1164], "container": true, "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [1233, 2227], "text": ["The loops are always created in pairs of two, e.g.: if this paramater is set to 1/2/3, you will see 2/4/6 visually repeating cycles. This is due to how the looping effect is achieved. For instance, let\u2019s say this parameter is set to N (and N is 2) and the animation duration is 200 frames:\n        ", {"text": ["first, the base animation is divided into N sections (2 sections); only the first section is retained and it is repeated for N times (2 times);"], "tag": "p", "type": "xml", "attrs": {}}, "\n        ", {"text": ["then, the repeated first sections (100 frames per section) are copied and shifted by half the section length (50 frames);"], "tag": "p", "type": "xml", "attrs": {}}, "\n        ", {"text": ["finally, the base sections (repeating 100-frame sections) and the shifted sections (repeating 100-frame sections with a 50-frame offset) are blended or added together, creating seamless transitions. As a result, in the length of a single base section (100 frames), the visuals actually repeat twice (once every 50 frames). Hence the loops are more appropriately called \"double-loops\"."], "tag": "p", "type": "xml", "attrs": {}}]}], "indent": 4, "text": ["Num. of Double-Loops"], "role": "item", "extent": [1207, 1233], "container": true, "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [2255, 2543], "text": ["Sets how to handle particles born too early. For the looping to work, the birth and death of a particle must be within the range of the first double-loop, e.g.: if ", {"text": ["Num. of Double-Loops"], "type": "strong"}, " is set to 2, the end of the first double-loop is half-way between Start Frame and End Frame."]}], "indent": 4, "text": ["Born Before Loop Start"], "role": "item", "extent": [2227, 2255], "container": true, "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [2568, 3179], "text": ["Sets how to handle particles dying too late. For the looping to work, the birth and death of a particle must be within the range of the first double-loop, e.g.: if ", {"text": ["Num. of Double-Loops"], "type": "strong"}, " is set to 2, the end of the first double-loop is half-way between Start Frame and End Frame.\n        ", {"text": ["It is recommended to reduce the life expectancy of your particles to fit within the range of a double-loop. But if you have to clamp particle lives at the end of the double-loop, it may result in a sudden drop in particle count as a lot of particles die at once. You can counter this with ", {"text": ["Fade Out Pscale"], "type": "strong"}, "."], "tag": "p", "type": "xml", "attrs": {}}]}], "indent": 4, "text": ["Dead After Loop End"], "role": "item", "extent": [2543, 2568], "container": true, "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [3226, 3421], "text": ["Offsets the point IDs from different loops to avoid repeated ID values. It is recommended to leave this on. Please note that this will not fix already repeated IDs on the input geometry."]}], "indent": 4, "text": ["Prevent Loops from Repeating Particle IDs"], "role": "item", "extent": [3179, 3226], "container": true, "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [3445, 4684], "text": ["Particles still alive at the end of the whole animation (from Start Frame to End Frame) will have the rest of their lifespans wrapped to the start of the animation.\n        ", {"text": [{"text": ["Stay Alive \u2026"], "type": "strong"}, ": is best suited for Houdini; it keeps the IDs consistent and ages the particles naturally."], "tag": "p", "type": "xml", "attrs": {}}, "\n        ", {"text": [{"text": ["Die at the End \u2026"], "type": "strong"}, ": is suited for Niagara; it offsets the ID, age, and life attributes to create two distinct groups of particles for the end and the start of the animation; it will often result in a few mismatched particles during emitter loop transitions, which can be countered with ", {"text": ["Fade In Pscale"], "type": "strong"}, "."], "tag": "p", "type": "xml", "attrs": {}}, "\n        ", {"text": [{"text": ["Spawn at the Start \u2026"], "type": "strong"}, ": is suited for Niagara; instead of wrapping particles, it spawns them at the start, keeps them alive throughout the animation, sets their pscales to zero when they should be invisible, and then lets them reappear near the end of the animation; it does not create mismatched particles during emitter loop transitions, but it will waste some resources moving invisible particles."], "tag": "p", "type": "xml", "attrs": {}}, "\n        ", {"text": [{"text": ["Never Spawn \u2026"], "type": "strong"}, ": premptively removes the particles that need wrapping; it sidesteps the problem, but it will result in noticeable drops in particle count during emitter loop transitions."], "tag": "p", "type": "xml", "attrs": {}}]}], "indent": 4, "text": ["Particle Wrap Mode"], "role": "item", "extent": [3421, 3445], "container": true, "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [4704, 5087], "text": ["Linearly scales the \"pscale\" attribute from 0% to 100% at the start of each particle\u2019s original lifespan (unaffected by any modifications to the age and life attributes from particle wrapping). This is particularly helpful when ", {"text": ["Particle Wrap Mode"], "type": "strong"}, " is set to \"Die at End and Respawn \u2026\", as this obfuscates the minor glitches that may happen during emitter loop transition."]}], "indent": 4, "text": ["Fade In Pscale"], "role": "item", "extent": [4684, 4704], "container": true, "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [5109, 5193], "text": ["In seconds, the absolute duration of each particle\u2019s pscale fade-in effect."]}], "indent": 4, "text": ["Fade-In Duration"], "role": "item", "extent": [5087, 5109], "container": true, "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [5214, 5415], "text": ["Linearly scales the \"pscale\" attribute from 100% to 0% towards end of each particle\u2019s original lifespan (unaffected by any modifications to the age and life attributes from particle wrapping)."]}], "indent": 4, "text": ["Fade Out Pscale"], "role": "item", "extent": [5193, 5214], "container": true, "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [5438, 5523], "text": ["In seconds, the absolute duration of each particle\u2019s pscale fade-out effect."]}], "indent": 4, "text": ["Fade-Out Duration"], "role": "item", "extent": [5415, 5438], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}, {"body": [{"body": [{"body": [{"indent": 8, "type": "para", "extent": [5576, 5787], "text": ["Outputs preview geometry with primitive spheres. The pscale attribute affects the scales of the spheres. Turning this on overrides the output of this node, so turn it off to output the actual particles."]}], "indent": 4, "text": ["Output Preview Geometry"], "role": "item", "extent": [5547, 5576], "container": true, "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [5816, 5969], "text": ["Colors the preview spheres using the age attribute divided by the life attribute. The 0-to-1 value is mapped to the violet-to-red color gradient."]}], "indent": 4, "text": ["Color by Normalized Age"], "role": "item", "extent": [5787, 5816], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 4, "level": 2, "text": ["Visualization"], "extent": [5523, 5547], "container": true, "type": "h", "id": null}], "indent": 0, "level": 1, "text": "Parameters", "role": "section", "extent": [1076, 1088], "container": true, "type": "parameters_section", "id": "parameters"}], "summary": [" Takes a mesh or volume that is animated and loops them. "], "type": "root", "attrs": {"version": "2.1", "tags": "sidefxlabs,  model, gamedev", "namespace": "labs", "internal": "labs::make_loop::2.1", "context": "sop", "type": "node", "icon": "make_loop_white"}, "title": ["Labs Make Loop"]}