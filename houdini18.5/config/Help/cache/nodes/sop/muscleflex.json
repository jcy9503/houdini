{"body": [{"indent": 0, "text": ["Muscle Flex"], "type": "title", "extent": [93, 109], "level": 0}, {"indent": 0, "type": "summary", "extent": [109, 172], "text": ["Animate contraction and relaxation on muscle geometry."]}, {"indent": 0, "type": "para", "extent": [172, 642], "text": ["The Muscle Flex SOP provides an interactive state to setup and animate the ", {"text": ["muscletension"], "type": "code"}, " point attribute on incoming muscle geometry which drives the flexing action in muscles during a simulation. The ", {"text": ["muscletension"], "type": "code"}, " point attribute is used by the ", {"text": ["Muscle Solver"], "fullpath": "/nodes/sop/musclesolver", "scheme": "Node", "type": "link", "value": "/nodes/sop/musclesolver"}, "\nto apply anisotropic scaling of the incoming tetrahedral meshes.  Anisotropic scaling is applied along the muscle fiber direction defined by the vector point attribute ", {"text": ["materialW"], "type": "code"}, "."]}, {"indent": 0, "type": "para", "extent": [642, 999], "text": ["As a convenience, this SOP will apply a Point Deform to the incoming muscles using the input animation source (usually, the animated Bone Geometry) purely for contextual viewing of the ", {"text": ["muscletension"], "type": "code"}, " animation.  The deformed animation is for reference only, as the ", {"text": ["Muscle Solver"], "fullpath": "/nodes/sop/musclesolver", "scheme": "Node", "type": "link", "value": "/nodes/sop/musclesolver"}, " only takes the static T-Pose position into account."]}, {"body": [{"body": [{"indent": 0, "type": "para", "extent": [1030, 1092], "text": ["Muscle Flex animation can be controlled in one of two ways:"]}, {"body": [{"indent": 0, "blevel": 2, "type": "ord", "extent": [1092, 1158], "text": ["By direct keyframing of individual muscle flex parameters."]}, {"indent": 0, "blevel": 2, "type": "ord", "extent": [1158, 1248], "text": ["By assigning an ", {"text": ["AutoFlex Line"], "fullpath": "/nodes/sop/autoflexlines", "scheme": "Node", "type": "link", "value": "/nodes/sop/autoflexlines"}, " to a muscle flex parameter."]}], "container": true, "type": "ord_group"}, {"indent": 0, "type": "para", "extent": [1248, 1353], "text": ["Refer to the ", {"text": ["muscle flex viewport state"], "fullpath": "/nodes/sop_state/muscleflex", "scheme": "Node", "type": "link", "value": "/nodes/sop_state/muscleflex"}, " for help with viewport interaction."]}, {"indent": 0, "type": "para", "extent": [1353, 1670], "text": ["The parameters found on this tab are generated automatically by detecting the ", {"text": ["muscle_id"], "type": "code"}, " attribute on the incoming muscle geometry.  A float parameter is created for each muscle_id found in the first input to this SOP.  The parameter names are labeled identically to the ", {"text": ["muscle_id"], "type": "code"}, " name for easy identification.  "]}, {"body": [{"indent": 0, "type": "para", "extent": [1695, 1994], "text": ["This SOP makes attempts to cache the ", {"text": ["muscle_id"], "type": "code"}, " names found on the input geometry in order to preserve any animation and parameter settings.   These buttons allow updating and/or resetting of the cache in the event that the incoming geometry is altered after initial wiring has been established."]}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [2026, 2128], "text": ["Add an new muscle_id\u2019s found on the incoming geometry and append them to the parameter list."]}], "indent": 0, "text": ["Detect New"], "role": "item", "attrs": {"id": "refreshids"}, "extent": [1994, 2006], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2160, 2314], "text": ["Remove any muscle flex parameters listed in this parameter dialog if the corresponding muscle_id does not exist in the incoming muscle geometry."]}], "indent": 0, "text": ["Remove Unused"], "role": "item", "attrs": {"id": "cullids"}, "extent": [2128, 2143], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2343, 2421], "text": ["Delete all muscle flex parameters and rebuild the internal cache list.  "]}], "indent": 0, "text": ["Reset All"], "role": "item", "attrs": {"id": "resetids"}, "extent": [2314, 2325], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [2427, 2565], "text": ["Pressing ", {"text": ["Reset All"], "type": "ui"}, " will destroy any existing channel animation, and any parameter values will be reset to the default value."]}], "indent": 0, "role": "item", "extent": [2421, 2427], "container": true, "type": "note"}], "container": true, "role": "item_group", "type": "note_group"}], "indent": 0, "level": 3, "text": ["Input Muscle IDs"], "extent": [1670, 1695], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"indent": 8, "type": "para", "extent": [2607, 2956], "text": ["The Muscle Flex parameter. (Parameter name will adapt according to your input geometry). Each parameter listed here is derived from the incoming muscle_id with the same name.  A value of 0 will cause a muscle to simulate as a relaxed softbody, while a value of 1.0 will maximize the muscle tension and cause it to contract and stiffen."]}], "indent": 4, "text": ["muscle_id_1"], "role": "item", "extent": [2584, 2607], "container": true, "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [2971, 3207], "text": ["This toggle is enabled when the AutoFlex Lines input is wired to the third input of this node.  When this toggle is enabled, the muscle flex parameter is switched to accept an id value that selects an AutoFlex Line ID."]}], "indent": 4, "text": ["auto"], "role": "item", "extent": [2956, 2971], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 3, "text": ["Muscle IDs"], "extent": [2565, 2584], "container": true, "type": "h", "id": null}], "indent": 0, "level": 2, "text": ["Muscle Flex"], "extent": [1011, 1030], "container": true, "type": "h", "id": null}, {"body": [{"indent": 0, "type": "para", "extent": [3222, 3515], "text": ["This tab is enabled when an ", {"text": ["AutoFlex Line SOP"], "fullpath": "/nodes/sop/autoflexlines", "scheme": "Node", "type": "link", "value": "/nodes/sop/autoflexlines"}, " is wired into the third input of this node.\nAutoFlex lines are a convenient mechanism used to drive muscle tension by simply using changes to the length of a line to indicate whether a muscle should contract or relax.  "]}, {"body": [{"indent": 0, "type": "para", "extent": [3542, 3782], "text": ["This SOP will detect and cache an primitive attributes named ", {"text": ["autoflex_id"], "type": "code"}, " coming from the third input to this node. \nThese buttons help manage the cache associated with this attribute as changes may occur on the incoming autoflex lines."]}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [3822, 3931], "text": ["Add an new alutoflexline_id\u2019s found on the incoming geometry and append them to the parameter list."]}], "indent": 0, "text": ["Detect New"], "role": "item", "attrs": {"id": "refreshautoflexids"}, "extent": [3782, 3794], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3971, 4125], "text": ["Remove any auto flex parameters listed in this parameter dialog if the corresponding autoflexline_id does not exist in the third input geometry."]}], "indent": 0, "text": ["Remove Unused"], "role": "item", "attrs": {"id": "cullautoflexids"}, "extent": [3931, 3946], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4162, 4244], "text": ["Delete all autoflex line parameters and rebuild the internal cache list."]}], "indent": 0, "text": ["Reset All"], "role": "item", "attrs": {"id": "resetautoflexids"}, "extent": [4125, 4136], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 3, "text": ["Input Autoflex IDs"], "extent": [3515, 3542], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"indent": 8, "type": "para", "extent": [4287, 4818], "text": ["The AutoFlex ratio parameter. (Parameter name will adapt according to your input geometry). \n        Each parameter listed here is derived from the incoming autoflexline_id with the same name.  \n        This parameter value indicates the length ratio at which maximum contraction should occur.  The ratio is relative to the rest length of the corresponding autoflex line. \n        For Example, a value of 0.5 will cause a muscle to contract whenever this line approaches a length that is half of its original rest length."]}], "indent": 4, "text": ["autoflex1_flex"], "role": "item", "extent": [4261, 4287], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 3, "text": ["Line IDs"], "extent": [4244, 4261], "container": true, "type": "h", "id": null}], "indent": 0, "level": 2, "text": ["AutoFlex"], "extent": [3207, 3222], "container": true, "type": "h", "id": null}, {"body": [{"indent": 0, "type": "para", "extent": [4840, 4951], "text": ["Proxy animation is used purely for reference so that muscle contraction animation can be applied in context."]}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [4999, 5194], "text": ["When muscles are flexed, they will be deformed with pseudo volume preservation akin to a squash-and-stretch effect.  This parameter will factor in a proportionate amount of this effect."]}], "indent": 0, "text": ["Proxy Flex Multiplier"], "role": "item", "attrs": {"id": "proxyflexfactor"}, "extent": [4951, 4974], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}, {"body": [{"indent": 0, "type": "para", "extent": [5226, 5448], "text": ["The second input to this SOP supplies an animation source with which to apply a ", {"text": ["Point Deformer"], "fullpath": "/nodes/sop/pointdeform", "scheme": "Node", "type": "link", "value": "/nodes/sop/pointdeform"}, " .  Local transformations are derived from the input points, and applied to the input muscle geometry."]}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [5484, 5579], "text": ["The rest position used by the animation source when point capturing the muscles. "]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [5601, 5761], "text": ["Timeshift the animation source to the T-Pose Frame indicated below, and use the geometry frozen at this frame as the capture position."]}], "indent": 4, "text": ["Use T-Pose Frame"], "extent": [5579, 5601], "container": true, "type": "dt"}, {"body": [{"indent": 8, "type": "para", "extent": [5781, 5877], "text": ["Use the vector attribute indicated below as the capture position."]}], "indent": 4, "text": ["From Attribute"], "extent": [5761, 5781], "container": true, "type": "dt"}], "container": true, "type": "dt_group"}], "indent": 0, "text": ["T-Pose Source"], "role": "item", "attrs": {"id": "tposeswitch"}, "extent": [5448, 5463], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [5911, 6059], "text": ["Enabled when ", {"text": ["Use T-Pose Fame"], "type": "ui"}, " is activated above.  This is the Frame (time) to hold animated source geometry to use as a capture frame."]}], "indent": 0, "text": ["T-Pose Frame"], "role": "item", "attrs": {"id": "tposeframe"}, "extent": [5877, 5891], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [6098, 6286], "text": ["Enabled when ", {"text": ["From Attribute"], "type": "ui"}, " is activated above.  This is the name of the point attribute on the second input geometry that specifies the point positions for the capture pose."]}], "indent": 0, "text": ["T-Pose Attribute"], "role": "item", "attrs": {"id": "tposeattrib"}, "extent": [6059, 6077], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [6310, 6408], "text": ["The maximum search radius for point influence.  See ", {"text": ["Point Deform"], "fullpath": "/nodes/sop/pointdeform", "scheme": "Node", "type": "link", "value": "/nodes/sop/pointdeform"}, "."]}], "indent": 0, "text": ["Radius"], "role": "item", "attrs": {"id": "radius"}, "extent": [6286, 6294], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [6439, 6548], "text": ["The minimum number of points to find for point influence.  See ", {"text": ["Point Deform"], "fullpath": "/nodes/sop/pointdeform", "scheme": "Node", "type": "link", "value": "/nodes/sop/pointdeform"}, "."]}], "indent": 0, "text": ["Minimum Points"], "role": "item", "attrs": {"id": "minpt"}, "extent": [6408, 6424], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [6579, 6688], "text": ["The maximum number of points to find for point influence.  See ", {"text": ["Point Deform"], "fullpath": "/nodes/sop/pointdeform", "scheme": "Node", "type": "link", "value": "/nodes/sop/pointdeform"}, "."]}], "indent": 0, "text": ["Maximum Points"], "role": "item", "attrs": {"id": "maxpt"}, "extent": [6548, 6564], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 3, "text": ["Point Deform Parameters"], "extent": [5194, 5226], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [6748, 6850], "text": ["Preserve muscle shape while applying the Point Deform.  See ", {"text": ["Delta Mush"], "fullpath": "/nodes/sop/deltamush", "scheme": "Node", "type": "link", "value": "/nodes/sop/deltamush"}, "."]}], "indent": 0, "text": ["Apply Delta Mush"], "role": "item", "attrs": {"id": "usedeltamush"}, "extent": [6707, 6726], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [6882, 6914], "text": ["Delta Mush iterations."]}], "indent": 0, "text": ["Iterations"], "role": "item", "attrs": {"id": "iterations"}, "extent": [6850, 6862], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [6943, 6984], "text": ["Delta Mush iteration step size."]}], "indent": 0, "text": ["Step Size"], "role": "item", "attrs": {"id": "stepsize"}, "extent": [6914, 6925], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 3, "text": ["Delta Mush"], "extent": [6688, 6707], "container": true, "type": "h", "id": null}], "indent": 0, "level": 2, "text": ["Proxy Animation"], "extent": [4818, 4840], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [7045, 7144], "text": ["Toggles the visibility of the animation source geometry (second input to this node)."]}], "indent": 0, "text": ["Source Animation Guide"], "role": "item", "attrs": {"id": "displayguide"}, "extent": [6998, 7023], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [7197, 7393], "text": ["Apply a color visualizer to the muscle tension attribute as it is animated by the muscle flex parameters.\n    Grey color indicates low muscle tension.  Red indicates high muscle tension."]}], "indent": 0, "text": ["Muscle Tension Visualizer"], "role": "item", "attrs": {"id": "vizmuscletension"}, "extent": [7144, 7171], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [7438, 7515], "text": ["Toggles the squash-and-stretch effect on flexing muscles."]}], "indent": 0, "text": ["Proxy Flex Visualizer"], "role": "item", "attrs": {"id": "vizproxyflex"}, "extent": [7393, 7416], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 2, "text": ["Display"], "extent": [6984, 6998], "container": true, "type": "h", "id": null}], "indent": 0, "level": 1, "text": "Parameters", "role": "section", "extent": [999, 1011], "container": true, "type": "parameters_section", "id": "parameters"}, {"body": [{"body": [{"body": [{"indent": 8, "type": "para", "extent": [7551, 7807], "text": ["This SOP will add/modify the point attribute: ", {"text": ["muscletension"], "type": "code"}, ".  The ", {"text": ["Muscle Solver"], "fullpath": "/nodes/sop/musclesolver", "scheme": "Node", "type": "link", "value": "/nodes/sop/musclesolver"}, " node will apply the ", {"text": ["muscletension"], "type": "code"}, " attribute to the simulation of muscle softbodies and apply a scale force proportional to this value."]}], "indent": 4, "text": ["muscletension"], "role": "item", "extent": [7527, 7551], "container": true, "type": "attributes_item", "id": "muscletension"}], "container": true, "role": "item_group", "type": "attributes_item_group"}], "indent": 0, "level": 1, "text": "Attributes", "role": "section", "extent": [7515, 7527], "container": true, "type": "attributes_section", "id": "attributes"}, {"body": [{"body": [{"indent": 0, "blevel": 2, "type": "bullet", "extent": [7816, 7860], "text": [{"text": ["AutoFlex Lines "], "fullpath": "/nodes/sop/autoflexlines", "scheme": "Node", "type": "link", "value": "/nodes/sop/autoflexlines"}]}], "container": true, "type": "bullet_group"}], "indent": 0, "level": 1, "text": "Related", "role": "section", "extent": [7807, 7816], "container": true, "type": "related_section", "id": "related"}], "summary": ["Animate contraction and relaxation on muscle geometry."], "type": "root", "attrs": {"since": "18.5", "namespace": null, "version": null, "context": "sop", "type": "node", "internal": "muscleflex", "icon": "SOP/muscleflex"}, "title": ["Muscle Flex"]}