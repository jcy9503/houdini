{"body": [{"indent": 0, "text": ["Fluid Compress"], "type": "title", "extent": [87, 106], "level": 0}, {"indent": 0, "type": "summary", "extent": [106, 182], "text": ["Compresses the output of fluid simulations to decrease size on disk"]}, {"indent": 0, "type": "para", "extent": [182, 648], "text": ["The Fluid Compress SOP compresses fluid simulations, usually before saving the data to disk.  The compression is generally lossy, in that FLIP particles will be culled below the specified depth, and volume bandwidth is limited by zeroing out values. However, SOPs such as ", {"text": ["Whitewater Source"], "fullpath": "/nodes/sop/whitewatersource", "scheme": "Node", "type": "link", "value": "/nodes/sop/whitewatersource"}, " and ", {"text": ["Particle Fluid Surface"], "fullpath": "/nodes/sop/particlefluidsurface", "scheme": "Node", "type": "link", "value": "/nodes/sop/particlefluidsurface"}, " are designed to detect compressed fluid input and regenerate any required missing data."]}, {"indent": 0, "type": "para", "extent": [648, 684], "text": ["The typical input of this SOP are:"]}, {"body": [{"indent": 0, "blevel": 2, "type": "bullet", "extent": [684, 719], "text": ["Particles from a FLIP simulation"]}, {"indent": 0, "blevel": 2, "type": "bullet", "extent": [719, 789], "text": ["A ", {"text": ["surface"], "type": "code"}, " field representing the SDF field of a liquid simulation"]}, {"indent": 0, "blevel": 2, "type": "bullet", "extent": [789, 902], "text": ["Three fields name ", {"text": ["vel.x"], "type": "code"}, ", ", {"text": ["vel.y"], "type": "code"}, ", and ", {"text": ["vel.z"], "type": "code"}, " representing the velocity vector field of a fluid simulation."]}], "container": true, "type": "bullet_group"}, {"indent": 0, "type": "para", "extent": [902, 960], "text": ["The primary methods of compression by this operator are:"]}, {"body": [{"indent": 0, "blevel": 2, "type": "bullet", "extent": [960, 1002], "text": ["Particle culling below specified depth."]}, {"indent": 0, "blevel": 2, "type": "bullet", "extent": [1002, 1085], "text": ["Partitioning the particles spatially and converting them into packed primitives."]}, {"indent": 0, "blevel": 2, "type": "bullet", "extent": [1085, 1150], "text": ["Volume bandwidth limiting and conversion to sparse VDB format."]}, {"indent": 0, "blevel": 2, "type": "bullet", "extent": [1150, 1228], "text": ["Flagging the VDB\u2019s to save as 16-bit on disk, further reducing disk space."]}], "container": true, "type": "bullet_group"}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [1234, 1544], "text": ["This SOP creates several detail attributes indicating that the fluid has been compressed. Several of these are also stored to the info block when written to file, making them accessible through the ", {"text": ["File SOP"], "fullpath": "/nodes/sop/file", "scheme": "Node", "type": "link", "value": "/nodes/sop/file"}, "'s ", {"text": ["Info Load"], "type": "ui"}, " mode or the ", {"text": ["gstat"], "type": "code"}, " command line tool.  These attributes include:"]}, {"body": [{"indent": 4, "blevel": 6, "type": "bullet", "extent": [1544, 1660], "text": [{"text": ["fluidcompress_particleband"], "type": "code"}, " and ", {"text": ["fluidcompress_volumeband"], "type": "code"}, " - the Particle and Volume bandwidth respectively."]}, {"indent": 4, "blevel": 6, "type": "bullet", "extent": [1660, 1806], "text": [{"text": ["fluidcompress_particlesuncompressed"], "type": "code"}, " and ", {"text": ["fluidcompress_particlescompressed"], "type": "code"}, " - the number of fluid particles before and after compression."]}, {"indent": 4, "blevel": 6, "type": "bullet", "extent": [1806, 1925], "text": [{"text": ["fluidcompress_volumesize"], "type": "code"}, " and ", {"text": ["fluidcompress_volumet"], "type": "code"}, " - the original size and center of the fluid volumes."]}], "container": true, "type": "bullet_group"}], "indent": 0, "role": "item", "extent": [1228, 1234], "container": true, "type": "note"}], "container": true, "role": "item_group", "type": "note_group"}, {"indent": 0, "type": "para", "extent": [1925, 2025], "text": ["For more information, see the ", {"text": ["Fluid Compression"], "fullpath": "/fluid/compress", "scheme": null, "type": "link", "value": "/fluid/compress"}, " help page in the Fluids chapter."]}, {"body": [{"body": [{"body": [{"indent": 8, "type": "para", "extent": [2055, 2132], "text": ["Particles and surface and velocity volumes from a fluid simulation."]}], "indent": 4, "text": ["Fluid Simulation"], "extent": [2033, 2055], "container": true, "type": "dt"}], "container": true, "type": "dt_group"}], "indent": 0, "level": 1, "text": "Inputs", "role": "section", "extent": [2025, 2033], "container": true, "type": "inputs_section", "id": "inputs"}, {"body": [{"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [2183, 2383], "text": ["The distance between two particles in the fluid simulation. This parameter\n    should generally reference the same parameter on the ", {"text": ["FLIP Object"], "fullpath": "/nodes/dop/flipobject", "scheme": "Node", "type": "link", "value": "/nodes/dop/flipobject"}, "\n    of the input simulation."]}], "indent": 0, "text": ["Particle Separation"], "role": "item", "extent": [2161, 2183], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2399, 2557], "text": ["If enabled, any particles below this depth in the ", {"text": ["surface"], "type": "code"}, " field will be deleted.  This\n    parameter is specified in units of ", {"text": ["Particle Separation"], "type": "ui"}, "."]}], "indent": 0, "text": ["Cull Bandwidth"], "role": "item", "extent": [2383, 2399], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2574, 2660], "text": ["If enabled, all particle attributes except those specified here will be deleted."]}], "indent": 0, "text": ["Keep Attributes"], "role": "item", "extent": [2557, 2574], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2676, 2971], "text": ["Partition the particles into packed primitives using the ", {"text": ["Pack Points"], "fullpath": "/nodes/sop/packpoints", "scheme": "Node", "type": "link", "value": "/nodes/sop/packpoints"}, " SOP.  Packing allows on-demand loading of particles from disk if the resulting files are loaded with ", {"text": ["Delay Load Geometry"], "type": "ui"}, " enabled on a ", {"text": ["File"], "fullpath": "/nodes/sop/file", "scheme": "Node", "type": "link", "value": "/nodes/sop/file"}, " or ", {"text": ["File Cache"], "fullpath": "/nodes/sop/filecache", "scheme": "Node", "type": "link", "value": "/nodes/sop/filecache"}, " SOP."]}], "indent": 0, "text": ["Pack Particles"], "role": "item", "extent": [2660, 2676], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 2, "text": ["Particles"], "extent": [2144, 2161], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [2992, 3070], "text": ["Input volumes named ", {"text": ["surface"], "type": "code"}, " and ", {"text": ["vel"], "type": "code"}, " will be converted to VDB format."]}], "indent": 0, "role": "item", "extent": [2985, 2992], "container": true, "type": "note"}], "container": true, "role": "item_group", "type": "note_group"}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [3087, 3213], "text": ["Limit the bandwidth on input ", {"text": ["surface"], "type": "code"}, " and ", {"text": ["vel"], "type": "code"}, " volumes beyond the specified distance\n    from the fluid surface.  "]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [3223, 3395], "text": ["This value should ideally be greater than the ", {"text": ["Foam Depth"], "type": "ui"}, " parameter on any ", {"text": ["Whitewater Solver"], "fullpath": "/nodes/dop/whitewatersolver", "scheme": "Node", "type": "link", "value": "/nodes/dop/whitewatersolver"}, " nodes used with this data as a source."]}], "indent": 4, "role": "item", "extent": [3213, 3223], "container": true, "type": "note"}], "container": true, "role": "item_group", "type": "note_group"}], "indent": 0, "text": ["Limit Bandwidth"], "role": "item", "extent": [3070, 3087], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3411, 3670], "text": ["The ", {"text": ["vel"], "type": "code"}, " volume is limited by advecting backwards through time and clearing any values\n    that do not result in advection to within the ", {"text": ["Limit Bandwidth"], "type": "ui"}, " of the surface field.  If operating at a different timescale you can adjust the parameter here."]}], "indent": 0, "text": ["Advection Time"], "role": "item", "extent": [3395, 3411], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3685, 3806], "text": ["The CFL constraint on the advection used for velocity limiting. Lower numbers are more accurate but more expensive."]}], "indent": 0, "text": ["Advection CFL"], "role": "item", "extent": [3670, 3685], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3817, 3906], "text": ["Velocity values below this speed are assumed to be zero and cleared to save memory."]}], "indent": 0, "text": ["Min Speed"], "role": "item", "extent": [3806, 3817], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3927, 4081], "text": ["A flag to specify that when writing to disk that the volumes should be down converted to 16 bit. This does not affect how they are stored in memory."]}], "indent": 0, "text": ["Write 16-Bit Floats"], "role": "item", "extent": [3906, 3927], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 2, "text": ["Volumes"], "extent": [2971, 2985], "container": true, "type": "h", "id": null}], "indent": 0, "level": 1, "text": "Parameters", "role": "section", "extent": [2132, 2144], "container": true, "type": "parameters_section", "id": "parameters"}, {"body": [{"body": [{"indent": 4, "blevel": 6, "type": "bullet", "extent": [4090, 4130], "text": [{"text": ["FLIP Solver"], "fullpath": "/nodes/dop/flipsolver", "scheme": "Node", "type": "link", "value": "/nodes/dop/flipsolver"}]}, {"indent": 4, "blevel": 6, "type": "bullet", "extent": [4130, 4170], "text": [{"text": ["Pack Points"], "fullpath": "/nodes/sop/packpoints", "scheme": "Node", "type": "link", "value": "/nodes/sop/packpoints"}]}, {"indent": 4, "blevel": 6, "type": "bullet", "extent": [4170, 4222], "text": [{"text": ["Whitewater Source"], "fullpath": "/nodes/sop/whitewatersource", "scheme": "Node", "type": "link", "value": "/nodes/sop/whitewatersource"}]}, {"indent": 4, "blevel": 6, "type": "bullet", "extent": [4222, 4274], "text": [{"text": ["Whitewater Solver"], "fullpath": "/nodes/dop/whitewatersolver", "scheme": "Node", "type": "link", "value": "/nodes/dop/whitewatersolver"}]}, {"indent": 4, "blevel": 6, "type": "bullet", "extent": [4274, 4338], "text": [{"text": ["Particle Fluid Surface"], "fullpath": "/nodes/sop/particlefluidsurface", "scheme": "Node", "type": "link", "value": "/nodes/sop/particlefluidsurface"}]}], "container": true, "type": "bullet_group"}], "indent": 0, "level": 1, "text": "Related", "role": "section", "extent": [4081, 4090], "container": true, "type": "related_section", "id": "related"}], "summary": ["Compresses the output of fluid simulations to decrease size on disk"], "type": "root", "attrs": {"since": "14.5", "namespace": null, "version": null, "context": "sop", "type": "node", "internal": "fluidcompress", "icon": "fluidcompress"}, "title": ["Fluid Compress"]}