{"body": [{"indent": 0, "text": ["RBD Constraint Properties"], "type": "title", "extent": [110, 140], "level": 0}, {"indent": 0, "type": "summary", "extent": [140, 202], "text": ["Creates attributes describing rigid body constraints."]}, {"indent": 0, "type": "para", "extent": [202, 354], "text": ["This SOP creates attributes on the input constraint geometry to describe the Bullet constraint types that they ", {"text": ["represent"], "fullpath": "/nodes/dop/constraintnetwork", "scheme": "Node", "type": "link", "value": "/nodes/dop/constraintnetwork"}, "."]}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [385, 467], "text": ["The primitives in the constraint geometry to edit constraint attributes for."]}], "indent": 0, "text": ["Constraint Group"], "role": "item", "extent": [366, 385], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [474, 672], "text": ["Indicates the radius of the sphere that appears at the constraint anchor positions in the viewport as guide geometry. Whether or not to display the anchor point depends on the constraint type."]}], "indent": 0, "text": ["Color"], "role": "item", "extent": [467, 474], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [685, 758], "text": ["Guide geometry\u2019s anchor widget scale for hard and soft constraints."]}], "indent": 0, "text": ["Guide Scale"], "role": "item", "extent": [672, 685], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [799, 915], "text": ["Specifies the type of constraint (such as glue or soft) to use for the primitives in the ", {"text": ["Constraint Group"], "type": "ui"}, "."]}], "indent": 0, "text": ["Constraint Type"], "role": "item", "attrs": {"id": "constrainttype"}, "extent": [758, 775], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [958, 1180], "text": ["Specifies whether the constraint affects position, orientation, or both.\n    This does not apply to glue constraints, which work by simulating glued chunks together as a single object with a compound collision shape."]}], "indent": 0, "text": ["Degrees of Freedom"], "role": "item", "attrs": {"id": "constraintdof"}, "extent": [915, 935], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [1226, 1379], "text": ["Specifies the ", {"text": ["Data Name"], "type": "ui"}, " of the constraint data (for example, the ", {"text": ["Glue Constraint Relationship"], "fullpath": "/nodes/dop/glueconrel", "scheme": "Node", "type": "link", "value": "/nodes/dop/glueconrel"}, ") to use in the DOP network."]}], "indent": 0, "text": ["Constraint Name"], "role": "item", "attrs": {"id": "glue_constraintname"}, "extent": [1180, 1197], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [748, 847], "text": ["Specifies the strength of the glue bond. If the value is -1, the connection will never break."]}], "indent": 0, "text": ["Strength"], "role": "item", "attrs": {"id": "strength"}, "extent": [719, 730], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [1471, 1524], "text": ["Randomly varies the strength of each glue bond."]}], "indent": 0, "text": ["Strength Variance"], "role": "item", "attrs": {"id": "glue_strengthvariance"}, "extent": [1421, 1440], "container": true, "type": "parameters_item"}, {"body": [{"type": "para", "indent": 4, "extent": [884, 1067], "text": ["The number of seconds for the glue impulse to decay by one half. Whenever a glued object gets hit, it accumulates a glue impulse force. This controls how fast that force decays."]}], "indent": 0, "text": ["Half-Life"], "role": "item", "attrs": {"id": "impulse_halflife"}, "extent": [847, 858], "container": true, "type": "parameters_item"}, {"body": [{"type": "para", "indent": 4, "extent": [1118, 1523], "text": ["Specifies how impulses from collisions spread across the ", {"text": ["Constraint Network"], "fullpath": "/nodes/dop/constraintnetwork", "scheme": "Node", "type": "link", "value": "/nodes/dop/constraintnetwork"}, ".  The solver records impacts on the objects (basically the points of the constraint network). It then propagates those impulses around to the neighboring objects based on the constraint network, and then finally transfers the impulse onto the constraint (adding it to the impact attribute)."]}, {"type": "para", "indent": 4, "extent": [1523, 1848], "text": ["The propagation rate is clamped between ", {"text": ["0"], "type": "code"}, " and ", {"text": ["1"], "type": "code"}, ", and the propagation works like a weighted average where the object also propagates to itself with a rate of ", {"text": ["1"], "type": "code"}, ".  So if the constraint to a neighboring object also has a rate of ", {"text": ["1"], "type": "code"}, ", then the impulse is evenly split with the neighboring object after 1 iteration."]}, {"type": "para", "indent": 4, "extent": [1848, 2463], "text": ["For example, let\u2019s say object A has two neighboring pieces (", {"text": ["B"], "type": "code"}, " and ", {"text": ["C"], "type": "code"}, "), which have constraints with a propagation rate of ", {"text": ["1.0"], "type": "code"}, " for ", {"text": ["A-B"], "type": "code"}, " and ", {"text": ["0.5"], "type": "code"}, " for ", {"text": ["A-C"], "type": "code"}, ". If object ", {"text": ["A"], "type": "code"}, " gets an initial impulse of ", {"text": ["1000"], "type": "code"}, ", with one iteration the impulse on each object (the solver just accumulates this internally) should be A: 400, B: 400, C: 200. This is because the impulse is spread with a weighted average and weights 1 (", {"text": ["A"], "type": "code"}, " back to itself) 1 (", {"text": ["A-B"], "type": "code"}, ") and 0.5 (", {"text": ["A-C"], "type": "code"}, "). If you stop at that point and accumulate the object impulses onto the constraint\u2019s impact attribute, you get ", {"text": ["800"], "type": "code"}, " for ", {"text": ["A-B"], "type": "code"}, " and ", {"text": ["600"], "type": "code"}, " for ", {"text": ["A-C"], "type": "code"}, "."]}, {"type": "para", "indent": 4, "extent": [2463, 2508], "text": [{"text": "", "fullpath": "/images/sop/glueconrel.png", "scheme": "Image", "type": "link", "value": "/images/sop/glueconrel.png"}]}], "indent": 0, "text": ["Propagation Rate"], "role": "item", "attrs": {"id": "propagate_rate"}, "extent": [1067, 1085], "container": true, "type": "parameters_item"}, {"body": [{"type": "para", "indent": 4, "extent": [2563, 2857], "text": ["Specifies the number of impact propagation iterations for the glue bond.\n    If this value is less than zero, the global number of iterations will be used (which is specified by the ", {"text": ["propagate_iteration"], "type": "code"}, " detail attribute on the ", {"fragment": "#attributes", "text": ["constraint network"], "value": "/nodes/dop/constraintnetwork#attributes", "fullpath": "/nodes/dop/constraintnetwork#attributes", "scheme": "Node", "type": "link"}, ")."]}, {"type": "para", "indent": 4, "extent": [2857, 3211], "text": ["When a glued object is hit, its impact value is spread along the constraint network to other glue bonds.\n    This allows distant glue bonds that are weak to be broken prior to nearer, strong bonds.\n    The impact propagations is the number of rounds of propagation to do.\n    Impulses will not travel more than this number of bonds each solve step."]}], "indent": 0, "text": ["Propagation Iterations"], "role": "item", "attrs": {"id": "propagationiterations"}, "extent": [2508, 2532], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [1740, 1878], "text": ["Specifies a different constraint type to switch to if the glue constraint is broken by the ", {"text": ["Bullet Solver"], "fullpath": "/nodes/dop/bulletrbdsolver", "scheme": "Node", "type": "link", "value": "/nodes/dop/bulletrbdsolver"}, "."]}], "indent": 0, "text": ["Switch Constraint Type When Broken"], "role": "item", "attrs": {"id": "usenextconstraint"}, "extent": [1677, 1713], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [1608, 1707], "text": ["Specifies the strength of the force that attempts to match the transforms of the two anchors."]}, {"indent": 4, "type": "para", "extent": [1707, 1767], "text": ["This value is equivalent to the frequency of a spring."]}], "indent": 0, "text": ["Stiffness"], "role": "item", "attrs": {"id": "stiffness"}, "extent": [1578, 1589], "container": true, "type": "parameters_item"}, {"body": [{"type": "para", "indent": 4, "extent": [1804, 2123], "text": ["Specifies how much damping is applied to the motion.\n    A value of 0 specifies no damping, and a value of 1 provides just enough damping to prevent oscillation.\n    Values between 0 and 1 allow oscillation (with some damping), and values greater than 1 provide increasingly damped motion that has no oscillation."]}, {"type": "para", "indent": 4, "extent": [2123, 2187], "text": ["This value is equivalent to the damping ratio of a spring."]}], "indent": 0, "text": ["Damping Ratio"], "role": "item", "attrs": {"id": "dampingratio"}, "extent": [1767, 1782], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2025, 2361], "text": ["Specifies whether the linear and angular components of the constraint use the same ", {"text": ["Stiffness"], "type": "ui"}, " and ", {"text": ["Damping Ratio"], "type": "ui"}, ".\n    This option should be enabled when using angular plasticity, since the rest position and orientation can change separately and produce corresponding changes to the linear or angular stiffness, respectively."]}], "indent": 0, "text": ["Override Angular Stiffness and Damping Ratio"], "role": "item", "extent": [1979, 2025], "container": true, "type": "parameters_item"}, {"body": [{"type": "para", "indent": 4, "extent": [2614, 2695], "text": ["A separate ", {"text": ["Stiffness"], "type": "ui"}, " value for the angular component of the constraint."]}], "indent": 0, "text": ["Angular Stiffness"], "role": "item", "attrs": {"id": "angularstiffness"}, "extent": [2569, 2588], "container": true, "type": "parameters_item"}, {"body": [{"type": "para", "indent": 4, "extent": [2747, 2832], "text": ["A separate ", {"text": ["Damping Ratio"], "type": "ui"}, " value for the angular component of the constraint."]}], "indent": 0, "text": ["Angular Damping Ratio"], "role": "item", "attrs": {"id": "angulardampingratio"}, "extent": [2695, 2718], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2495, 2567], "text": ["Specifies whether linear plasticity is enabled for the constraint."]}], "indent": 0, "text": ["Enable Plasticity"], "role": "item", "extent": [2476, 2495], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2573, 2729], "text": ["The rate at which the constraint\u2019s rest length is adjusted to match its current state.\n    A value of zero will disable plasticity for the constraint."]}], "indent": 0, "text": ["Rate"], "role": "item", "extent": [2567, 2573], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2740, 2823], "text": ["The distance threshold at which plasticity will be applied to the constraint."]}], "indent": 0, "text": ["Threshold"], "role": "item", "extent": [2729, 2740], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2853, 2971], "text": ["Specifies whether the threshold should be a percentage of the constraint\u2019s rest length, or an absolute distance."]}], "indent": 0, "text": ["Ratio of Current Rest Length"], "role": "item", "extent": [2823, 2853], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2982, 3193], "text": ["Controls how the ", {"text": ["Stiffness"], "type": "ui"}, " is modified as the rest length is adjusted based on the ", {"text": ["Rate"], "type": "ui"}, ".\n    A value greater than 1 will increase the stiffness, and a value less than 1 will decrease the stiffness."]}], "indent": 0, "text": ["Hardening"], "role": "item", "extent": [2971, 2982], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3220, 3293], "text": ["Specifies whether angular plasticity is enabled for the constraint."]}], "indent": 0, "text": ["Enable Angular Plasticity"], "role": "item", "extent": [3193, 3220], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3307, 3364], "text": ["A separate ", {"text": ["Rate"], "type": "ui"}, " control for angular plasticity."]}], "indent": 0, "text": ["Angular Rate"], "role": "item", "extent": [3293, 3307], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3383, 3484], "text": ["The angle threshold (in degrees) at which angular plasticity will be applied to the constraint."]}], "indent": 0, "text": ["Angular Threshold"], "role": "item", "extent": [3364, 3383], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3503, 3565], "text": ["A separate ", {"text": ["Hardening"], "type": "ui"}, " control for angular plasticity."]}], "indent": 0, "text": ["Angular Hardening"], "role": "item", "extent": [3484, 3503], "container": true, "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [75, 348], "text": ["Increasing this value will make the constraint spongier, and\n        may increase the stability of the simulation. The constraint\n        may be violated by an amount proportional to this parameter\n        times the force that is needed to enforce the constraint."]}], "container": true, "text": ["Constraint Force Mixing"], "role": "item", "extent": [46, 75], "indent": 4, "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [379, 849], "text": ["Specifies what proportion of the constraint error will be fixed\n        during the next simulation step. If ERP is set to 0,\n        constrained objects will drift apart as the simulation\n        proceeds. If ERP is set to 1, the solver will attempt to fix\n        all constraint error during the next simulation step (however,\n        this may result in instability in some situations). A value\n        between 0.1 and 0.8 is recommended for most simulations."]}], "container": true, "text": ["Error Reduction Parameter"], "role": "item", "extent": [348, 379], "indent": 4, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}, {"body": [{"body": [{"body": [{"indent": 12, "type": "para", "extent": [1439, 1520], "text": ["Specifies the number of axes that the angular motor is enabled for."]}], "container": true, "text": ["Number of Motors"], "role": "item", "extent": [1413, 1439], "indent": 8, "type": "parameters_item"}, {"body": [{"indent": 12, "type": "para", "extent": [1536, 1628], "text": ["The direction of the first axis of rotation in the local space of the objects."]}], "container": true, "text": ["Axis 1"], "role": "item", "extent": [1520, 1536], "indent": 8, "type": "parameters_item"}, {"body": [{"indent": 12, "type": "para", "extent": [1644, 1827], "text": ["The direction of the second axis of rotation. This should be perpendicular to ", {"text": ["Axis 1"], "type": "ui"}, ". The third axis is calculated as the cross product of ", {"text": ["Axis 1"], "type": "ui"}, " and ", {"text": ["Axis 2"], "type": "ui"}, "."]}], "container": true, "text": ["Axis 2"], "role": "item", "extent": [1628, 1644], "indent": 8, "type": "parameters_item"}, {"body": [{"indent": 12, "type": "para", "extent": [1862, 1954], "text": ["The target relative angular velocity around each of the enabled rotation axes."]}], "container": true, "text": ["Relative Angular Velocity"], "role": "item", "extent": [1827, 1862], "indent": 8, "type": "parameters_item"}, {"body": [{"indent": 12, "type": "para", "extent": [1975, 2124], "text": ["The maximum impulse that the solver is allowed to apply to enforce the target angular velocity. This controls the strength of the motor."]}], "container": true, "text": ["Max Impulse"], "role": "item", "extent": [1954, 1975], "indent": 8, "type": "parameters_item"}], "container": true, "type": "parameters_item_group"}], "container": true, "level": 2, "text": ["Angular Motor"], "extent": [1389, 1413], "indent": 4, "type": "h", "id": null}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [912, 1258], "text": ["If greater than zero, overrides the number of iterations performed by\n        the constraint solver for this constraint. If some groups of\n        constraints require more iterations than others, this parameter can be\n        used instead of globally increasing the number of iterations on the\n        ", {"text": ["solver"], "fullpath": "/nodes/dop/bulletrbdsolver", "scheme": "Node", "type": "link", "value": "/nodes/dop/bulletrbdsolver"}, "."]}], "container": true, "text": ["Constraint Iterations"], "role": "item", "extent": [885, 912], "indent": 4, "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [1282, 1353], "text": ["Disables collision detection between the constrained objects."]}], "container": true, "text": ["Disable Collisions"], "role": "item", "extent": [1258, 1282], "indent": 4, "type": "parameters_item"}], "container": true, "type": "parameters_item_group"}], "indent": 0, "level": 1, "text": "Parameters", "role": "section", "extent": [354, 366], "container": true, "type": "parameters_section", "id": "parameters"}, {"body": [{"body": [{"indent": 4, "blevel": 6, "type": "bullet", "extent": [3784, 3817], "text": [{"text": "", "fullpath": "/nodes/sop/booleanfracture", "scheme": "Node", "type": "link", "value": "/nodes/sop/booleanfracture"}]}, {"indent": 4, "blevel": 6, "type": "bullet", "extent": [3817, 3845], "text": [{"text": "", "fullpath": "/nodes/sop/rbdcluster", "scheme": "Node", "type": "link", "value": "/nodes/sop/rbdcluster"}]}, {"indent": 4, "blevel": 6, "type": "bullet", "extent": [3845, 3880], "text": [{"text": "", "fullpath": "/nodes/sop/rbdinteriordetail", "scheme": "Node", "type": "link", "value": "/nodes/sop/rbdinteriordetail"}]}, {"indent": 4, "blevel": 6, "type": "bullet", "extent": [3880, 3913], "text": [{"text": "", "fullpath": "/nodes/sop/voronoifracture", "scheme": "Node", "type": "link", "value": "/nodes/sop/voronoifracture"}]}], "container": true, "type": "bullet_group"}], "indent": 0, "level": 1, "text": "Related", "role": "section", "extent": [3775, 3784], "container": true, "type": "related_section", "id": "related"}], "title": ["RBD Constraint Properties"], "summary": ["Creates attributes describing rigid body constraints."], "attrs": {"since": "17.0", "namespace": null, "version": null, "context": "sop", "type": "node", "internal": "rbdconstraintproperties", "icon": "SOP/rbdconstraintproperties"}, "included": ["/nodes/dop/bulletsoftconrel", "/nodes/dop/glueconrel", "/nodes/dop/standard_bulletconstraint_parm", "/nodes/dop/standard_data_idparms", "/nodes/dop/standard_data_inputs", "/nodes/dop/standard_data_locals", "/nodes/dop/standard_data_outputs", "/nodes/dop/standard_data_parms", "/nodes/dop/standard_dataactive_parms", "/nodes/dop/standard_datagroup_parms", "/nodes/dop/standard_dataname_parms", "/nodes/dop/standard_dataop_parms", "/nodes/dop/standard_datashare_parms", "/nodes/dop/standard_locals"], "type": "root"}