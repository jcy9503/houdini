{"body": [{"indent": 0, "text": ["Point Velocity"], "type": "title", "extent": [85, 104], "level": 0}, {"indent": 0, "type": "summary", "extent": [104, 176], "text": [" Computes and manipulates velocities for points of a geometry. "]}, {"indent": 0, "type": "para", "extent": [176, 496], "text": ["The Point Velocity SOP provides a simple interface to compute and manipulate\nthe velocity attribute, ", {"text": ["v"], "type": "code"}, ", of a geometry\u2019s points. The node includes\nfunctionality to robustly compute velocity from time-dependent deformation of\nthe incoming geometry, as well as several ways to generate and composite noise\non top of it."]}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [502, 691], "text": ["The order of tabs corresponds to the order in which their corresponding\n    operations are performed (from left to right). When enabled, ", {"text": ["Add\n    Velocity"], "type": "ui"}, " modifier is applied last."]}], "indent": 0, "role": "item", "extent": [496, 502], "container": true, "type": "note"}], "container": true, "role": "item_group", "type": "note_group"}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [707, 759], "text": ["Geometry whose point velocities to manipulate."]}], "indent": 0, "text": ["Input"], "extent": [699, 707], "container": true, "type": "dt"}], "container": true, "type": "dt_group"}], "indent": 0, "level": 1, "text": "Inputs", "role": "section", "extent": [691, 699], "container": true, "type": "inputs_section", "id": "inputs"}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [777, 801], "text": ["Modified geometry."]}], "indent": 0, "text": ["Output"], "extent": [768, 777], "container": true, "type": "dt"}], "container": true, "type": "dt_group"}], "indent": 0, "level": 1, "text": "Outputs", "role": "section", "extent": [759, 768], "container": true, "type": "outputs_section", "id": "outputs"}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [836, 898], "text": ["Only points in this group will be affected by this node."]}], "indent": 0, "text": ["Group"], "role": "item", "attrs": {"id": "group"}, "extent": [813, 821], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [937, 1004], "text": ["When enabled, this vector is added to every point\u2019s velocity."]}], "indent": 0, "text": ["Add Velocity"], "role": "item", "attrs": {"id": "addvel constvel"}, "extent": [898, 912], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [1047, 1110], "text": ["Controls how the velocity point attribute is initialized."]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [1140, 1211], "text": ["Point velocities are deduced from their time-dependent motion."]}], "indent": 4, "text": ["Compute from Deformation"], "extent": [1110, 1140], "container": true, "type": "dt"}, {"body": [{"indent": 8, "type": "para", "extent": [1230, 1400], "text": ["The incoming point velocities are kept; if the input geometry does not\n        contain a velocity point attribute, it is created and initialized to\n        zero."]}], "indent": 4, "text": ["Keep Incoming"], "extent": [1211, 1230], "container": true, "type": "dt"}, {"body": [{"indent": 8, "type": "para", "extent": [1415, 1493], "text": ["The given ", {"text": ["Default Value"], "type": "ui"}, " is written to each point\u2019s ", {"text": ["v"], "type": "code"}, " attribute."]}], "indent": 4, "text": ["Set Value"], "extent": [1400, 1415], "container": true, "type": "dt"}, {"body": [{"indent": 8, "type": "para", "extent": [1513, 1595], "text": ["Velocities are initialized using the value of the given point attribute."]}], "indent": 4, "text": ["From Attribute"], "extent": [1493, 1513], "container": true, "type": "dt"}], "container": true, "type": "dt_group"}], "indent": 0, "text": ["Initialization"], "role": "item", "attrs": {"id": "init"}, "extent": [1016, 1033], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [1626, 1731], "text": ["Velocities get set to this value; only available when ", {"text": ["Initialization"], "type": "ui"}, "\n    mode is ", {"text": ["Set Value"], "type": "ui"}, "."]}], "indent": 0, "text": ["Default Value"], "role": "item", "attrs": {"id": "defval"}, "extent": [1595, 1610], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [1758, 1830], "text": ["Frame offset used for computing point velocities from deformation."]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [1840, 1994], "text": ["If ", {"text": ["Velocity Approximation"], "type": "ui"}, " is set to ", {"text": ["Central Difference"], "type": "ui"}, ", the\n        geometries used are offset forward and backward by ", {"text": ["Frame Sample"], "type": "ui"}, "."]}], "indent": 4, "role": "item", "extent": [1830, 1840], "container": true, "type": "note"}], "container": true, "role": "item_group", "type": "note_group"}], "indent": 0, "text": ["Frame Sample"], "role": "item", "attrs": {"id": "inc"}, "extent": [1731, 1745], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2042, 2156], "text": ["Enabling this option ensures that the geometry is not evaluated outside of\n    the provided ", {"text": ["Frame Range"], "type": "ui"}, "."]}], "indent": 0, "text": ["Evaluate Within Frame Range"], "role": "item", "attrs": {"id": "evalframe"}, "extent": [1994, 2023], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2189, 2328], "text": ["When ", {"text": ["Evaluate Within Frame Range"], "type": "ui"}, " is enabled, the node ensures that the\n    input geometry is not evaluated outside of this range."]}], "indent": 0, "text": ["Frame Range"], "role": "item", "attrs": {"id": "framerange"}, "extent": [2156, 2169], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2378, 2458], "text": ["Finite difference method to use for computing velocities from deformation."]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [2483, 2655], "text": ["Approximates velocity by considering the difference in particle\n        positions from the current frame and the frame offset backward by\n        ", {"text": ["Frame Sample"], "type": "ui"}, "."]}], "indent": 4, "text": ["Backward Difference"], "extent": [2458, 2483], "container": true, "type": "dt"}, {"body": [{"indent": 8, "type": "para", "extent": [2679, 2849], "text": ["Approximates velocity by considering the difference in particle\n        positions from the current frame offset forward and backward by\n        ", {"text": ["Frame Sample"], "type": "ui"}, "."]}], "indent": 4, "text": ["Central Difference"], "extent": [2655, 2679], "container": true, "type": "dt"}, {"body": [{"indent": 8, "type": "para", "extent": [2873, 3060], "text": ["Approximates velocity by considering the difference in particle\n        positions from the current frame offset forward by ", {"text": ["Frame Sample"], "type": "ui"}, " and\n        the current frame itself."]}], "indent": 4, "text": ["Forward Difference"], "extent": [2849, 2873], "container": true, "type": "dt"}], "container": true, "type": "dt_group"}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [3070, 3275], "text": ["If ", {"text": ["Evaluate Within Frame Range"], "type": "ui"}, " is enabled and one of the frame\n        samples lies outside the specified ", {"text": ["Frame Range"], "type": "ui"}, ", this node will try\n        to use an alternate approximation scheme."]}], "indent": 4, "role": "item", "extent": [3060, 3070], "container": true, "type": "note"}], "container": true, "role": "item_group", "type": "note_group"}], "indent": 0, "text": ["Velocity Approximation"], "role": "item", "attrs": {"id": "velapproximation"}, "extent": [2328, 2352], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3319, 3494], "text": ["When this option is enabled, this node will also approximate point\n    accelerations. This is useful for rendering curved trajectories with\n    acceleration motion blur."]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [3504, 3636], "text": ["The calculated accelerations will only be non-zero if ", {"text": ["Velocity\n        Approximation"], "type": "ui"}, " is set to ", {"text": ["Central Difference"], "type": "ui"}, "."]}], "indent": 4, "role": "item", "extent": [3494, 3504], "container": true, "type": "note"}], "container": true, "role": "item_group", "type": "note_group"}], "indent": 0, "text": ["Compute Acceleration"], "role": "item", "attrs": {"id": "computeaccel"}, "extent": [3275, 3297], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3684, 3755], "text": ["The computed acceleration will be stored in this point attribute."]}], "indent": 0, "text": ["Acceleration Attribute"], "role": "item", "attrs": {"id": "accelattribute"}, "extent": [3636, 3660], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3805, 3944], "text": ["Enabling this option will use the difference in orientations to compute the\n    angular velocity (stored in the ", {"text": ["w"], "type": "code"}, " point attribute)."]}], "indent": 0, "text": ["Compute Angular Velocity"], "role": "item", "attrs": {"id": "computeangular"}, "extent": [3755, 3781], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3990, 4150], "text": ["When this option is enabled, points on successive frames will be identified\n    by using the value of the provided attribute rather than the point number."]}], "indent": 0, "text": ["Match by Attribute"], "role": "item", "attrs": {"id": "matchbyattribute"}, "extent": [3944, 3964], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4196, 4331], "text": ["Name of the integer or string point attribute to use for matching\n    successive frames (when ", {"text": ["Match by Attribute"], "type": "ui"}, " is enabled)."]}], "indent": 0, "text": ["Attribute to Match"], "role": "item", "attrs": {"id": "attributetomatch"}, "extent": [4150, 4170], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4367, 4509], "text": ["Name of the point attribute to use for initializing velocities. Only\n    available when ", {"text": ["Initialization"], "type": "ui"}, " is set to ", {"text": ["From Attribute"], "type": "ui"}, "."]}], "indent": 0, "text": ["Attribute Name"], "role": "item", "attrs": {"id": "attribname"}, "extent": [4331, 4347], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4531, 4651], "text": ["Attribute corresponding to ", {"text": ["Attribute Name"], "type": "ui"}, " is multiplied by this value\n    to get the initial point velocities."]}], "indent": 0, "text": ["Scale"], "role": "item", "attrs": {"id": "scale"}, "extent": [4509, 4516], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 2, "text": ["Basic"], "extent": [1004, 1016], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [4707, 4765], "text": ["Adds divergence-free curl noise to point velocities."]}], "indent": 0, "text": ["Add Curl Noise"], "role": "item", "attrs": {"id": "addcurlnoise"}, "extent": [4668, 4685], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4793, 4863], "text": ["If this option is turned on, produced noise will vary with time."]}], "indent": 0, "text": ["Animated"], "role": "item", "attrs": {"id": "animated"}, "extent": [4765, 4775], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4887, 4933], "text": ["Controls the amount of added curl noise."]}], "indent": 0, "text": ["Scale"], "role": "item", "attrs": {"id": "cnscale"}, "extent": [4863, 4870], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4972, 5116], "text": ["Time rate of change of the noise pattern is inversely proportional to\n    ", {"text": ["Pulse Duration"], "type": "ui"}, "; only available when ", {"text": ["Animated"], "type": "ui"}, " is enabled."]}], "indent": 0, "text": ["Pulse Duration"], "role": "item", "attrs": {"id": "pulseduration"}, "extent": [4933, 4949], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [5149, 5205], "text": ["Controls base feature size of the generated noise."]}], "indent": 0, "text": ["Swirl Size"], "role": "item", "attrs": {"id": "cnswirlsize"}, "extent": [5116, 5128], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [5240, 5372], "text": ["Feature size along each axis is governed by the product of ", {"text": ["Swirl Size"], "type": "ui"}, "\n    with the applicable component of this parameter."]}], "indent": 0, "text": ["Swirl Scale"], "role": "item", "attrs": {"id": "cnswirlscale"}, "extent": [5205, 5218], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [5398, 5548], "text": ["Offset within the evaluated noise field. Can be used as a seed to modify\n    the noise values without affecting the overall look of the pattern."]}], "indent": 0, "text": ["Offset"], "role": "item", "attrs": {"id": "cnoffset"}, "extent": [5372, 5380], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [5572, 5637], "text": ["Controls influence falloff for each successive noise layer."]}], "indent": 0, "text": ["Grain"], "role": "item", "attrs": {"id": "cnrough"}, "extent": [5548, 5555], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [5671, 5725], "text": ["Specifies the number of composited noise layers."]}], "indent": 0, "text": ["Turbulence"], "role": "item", "attrs": {"id": "cnturbulence"}, "extent": [5637, 5649], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [5764, 6101], "text": ["Noise for each point is produced by sampling a volumetric field using the\n    value of this vector attribute. If this parameter is set to ", {"text": ["P"], "type": "code"}, ", the\n    applied noise pattern will vary based on the motion of the points. If this\n    is undesirable, a ", {"text": ["rest"], "type": "code"}, " attribute can be added to the input geometry and\n    its value used instead."]}], "indent": 0, "text": ["Location Attribute"], "role": "item", "attrs": {"id": "locattrib"}, "extent": [5725, 5745], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 2, "text": ["Curl Noise"], "extent": [4651, 4668], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [6164, 6241], "text": ["Adds the velocity of an animated object-level node to point velocities."]}], "indent": 0, "text": ["Add Object Motion"], "role": "item", "attrs": {"id": "addobjectmotion"}, "extent": [6119, 6139], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [6271, 6321], "text": ["The object node to extract a transform from."]}], "indent": 0, "text": ["Object Path"], "role": "item", "attrs": {"id": "objpath"}, "extent": [6241, 6254], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [6346, 6441], "text": ["Before being added to point velocities, the object velocity is scaled by\n    this amount."]}], "indent": 0, "text": ["Scale"], "role": "item", "attrs": {"id": "objscale"}, "extent": [6321, 6328], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [6474, 6534], "text": ["Frame offset used for computing the object\u2019s velocity."]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [6544, 6711], "text": ["If ", {"text": ["Velocity Approximation"], "type": "ui"}, " is set to ", {"text": ["Central Difference"], "type": "code"}, ", the\n        object transforms used are offset forward and backward by ", {"text": ["Frame\n        Sample"], "type": "ui"}, "."]}], "indent": 4, "role": "item", "extent": [6534, 6544], "container": true, "type": "note"}], "container": true, "role": "item_group", "type": "note_group"}], "indent": 0, "text": ["Frame Sample"], "role": "item", "attrs": {"id": "objsample"}, "extent": [6441, 6455], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [6761, 6835], "text": ["Finite difference method to use for computing the object\u2019s velocity."]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [6860, 7038], "text": ["Approximates velocity by considering the difference in object\u2019s\n        transformations from the current frame and the frame offset backward by\n        ", {"text": ["Frame Sample"], "type": "ui"}, "."]}], "indent": 4, "text": ["Backward Difference"], "extent": [6835, 6860], "container": true, "type": "dt"}, {"body": [{"indent": 8, "type": "para", "extent": [7062, 7238], "text": ["Approximates velocity by considering the difference in object\u2019s\n        transformations from the current frame offset forward and backward by\n        ", {"text": ["Frame Sample"], "type": "ui"}, "."]}], "indent": 4, "text": ["Central Difference"], "extent": [7038, 7062], "container": true, "type": "dt"}, {"body": [{"indent": 8, "type": "para", "extent": [7262, 7455], "text": ["Approximates velocity by considering the difference in object\u2019s\n        transformations from the current frame offset forward by ", {"text": ["Frame\n        Sample"], "type": "ui"}, " and the current frame itself."]}], "indent": 4, "text": ["Forward Difference"], "extent": [7238, 7262], "container": true, "type": "dt"}], "container": true, "type": "dt_group"}], "indent": 0, "text": ["Velocity Approximation"], "role": "item", "attrs": {"id": "objapproximation"}, "extent": [6711, 6735], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 2, "text": ["From Object"], "extent": [6101, 6119], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [7512, 7561], "text": ["Modify point velocities with conical noise."]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [7571, 7681], "text": ["Conical noise is not spatially coherent, nor does it continuously\n        depend on the seed values."]}], "indent": 4, "role": "item", "extent": [7561, 7571], "container": true, "type": "note"}], "container": true, "role": "item_group", "type": "note_group"}], "indent": 0, "text": ["Conical Noise"], "role": "item", "attrs": {"id": "doconenoise"}, "extent": [7475, 7491], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [7705, 7954], "text": ["In ", {"text": ["Add"], "type": "ui"}, " mode, each point\u2019s velocity is offset by a random vector, which\n    falls within the defined cone. In ", {"text": ["Rotate"], "type": "ui"}, " mode, each point\u2019s velocity is\n    randomly jittered within a cone of the specified size (without affecting\n    speed)."]}], "indent": 0, "text": ["Mode"], "role": "item", "attrs": {"id": "conemode"}, "extent": [7681, 7687], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [7980, 8087], "text": ["Controls the cone height (and the amount of added conical noise) when\n    ", {"text": ["Mode"], "type": "ui"}, " is set to ", {"text": ["Add"], "type": "ui"}, "."]}], "indent": 0, "text": ["Scale"], "role": "item", "attrs": {"id": "conescale"}, "extent": [7954, 7961], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [8118, 8148], "text": ["Controls the cone width."]}], "indent": 0, "text": ["Cone Angle"], "role": "item", "attrs": {"id": "coneangle"}, "extent": [8087, 8099], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [8176, 8267], "text": ["The cone opens in this direction; only available when ", {"text": ["Mode"], "type": "ui"}, " is set to\n    ", {"text": ["Add"], "type": "ui"}, "."]}], "indent": 0, "text": ["Direction"], "role": "item", "attrs": {"id": "conedir"}, "extent": [8148, 8159], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [8328, 8543], "text": ["When enabled, value of this vector point attribute is used to control the\n    cone orientation for each point, instead of the global ", {"text": ["Direction"], "type": "ui"}, "\n    parameter; only available when ", {"text": ["Mode"], "type": "ui"}, " is set to ", {"text": ["Add"], "type": "ui"}, "."]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [8553, 8672], "text": ["If the referenced point attribute does not exist or is zero, the global\n        ", {"text": ["Direction"], "type": "ui"}, " vector is used."]}], "indent": 4, "role": "item", "extent": [8543, 8553], "container": true, "type": "note"}], "container": true, "role": "item_group", "type": "note_group"}], "indent": 0, "text": ["Direction Attribute"], "role": "item", "attrs": {"id": "useconedirattrib conedirattrib"}, "extent": [8267, 8288], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [8726, 8893], "text": ["When enabled, the randomly generated vector is biased towards the center of\n    the cone (for positive values) or the edge of the cone (for negative\n    values)."]}], "indent": 0, "text": ["Directional Bias"], "role": "item", "attrs": {"id": "useconedirbias conedirbias"}, "extent": [8672, 8690], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [8924, 9059], "text": ["Value of this parameter is used to seed the random number generator. The\n    generated noise can be altered by changing the seed."]}], "indent": 0, "text": ["Global Seed"], "role": "item", "attrs": {"id": "coneseed"}, "extent": [8893, 8906], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [9117, 9317], "text": ["When enabled, the value of this attribute is used for seeding the random\n    vector for each point instead of the point number; this enables consistent\n    noise generation when deleting points."]}], "indent": 0, "text": ["Seed Attribute"], "role": "item", "attrs": {"id": "useconeseedattrib coneseedattrib"}, "extent": [9059, 9075], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 2, "text": ["Conical Noise"], "extent": [7455, 7475], "container": true, "type": "h", "id": null}], "indent": 0, "level": 1, "text": "Parameters", "role": "section", "extent": [801, 813], "container": true, "type": "parameters_section", "id": "parameters"}], "summary": [" Computes and manipulates velocities for points of a geometry. "], "type": "root", "attrs": {"since": "17.0", "namespace": null, "version": null, "context": "sop", "type": "node", "internal": "pointvelocity", "icon": "POP/velocity"}, "title": ["Point Velocity"]}