{"body": [{"indent": 0, "text": ["Adapt to Terrain"], "type": "title", "extent": [159, 180], "level": 0}, {"indent": 0, "type": "summary", "extent": [180, 241], "text": ["Adapts a character\u2019s skeleton to conform to terrain."]}, {"indent": 0, "type": "para", "extent": [241, 438], "text": ["This node rays the provided hip and foot joints on to the input terrain and then runs a ", {"text": "", "fullpath": "/nodes/sop/kinefx--fullbodyik", "scheme": "Node", "type": "link", "value": "/nodes/sop/kinefx--fullbodyik"}, " on the whole skeleton to conform the whole character to the terrain properly."]}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [459, 493], "text": ["Choose method of projection."]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [515, 575], "text": ["Specify a direction vector to use for projecting. "]}, {"body": [{"body": [{"indent": 12, "type": "para", "extent": [594, 717], "text": ["The projection will happen from the character\u2019s position in the direction of this specified direction vector."]}], "indent": 8, "text": ["Direction"], "extent": [575, 594], "container": true, "type": "dt"}], "container": true, "type": "dt_group"}], "indent": 4, "text": ["Direction Vector"], "extent": [493, 515], "container": true, "type": "dt"}, {"body": [{"indent": 8, "type": "para", "extent": [737, 812], "text": ["Specify a vector attribute name that will be used for projecting."]}, {"body": [{"body": [{"indent": 12, "type": "para", "extent": [831, 910], "text": ["Name of the attribute to read the projection direction data from."]}], "indent": 8, "text": ["Attribute"], "extent": [812, 831], "container": true, "type": "dt"}], "container": true, "type": "dt_group"}], "indent": 4, "text": ["From Attribute"], "extent": [717, 737], "container": true, "type": "dt"}, {"body": [{"indent": 8, "type": "para", "extent": [938, 1036], "text": ["Specify a vector attribute name from the terrain input that will be used for projecting."]}, {"body": [{"body": [{"indent": 12, "type": "para", "extent": [1063, 1165], "text": ["Name of the attribute from the terrain input to read the projection direction data from."]}], "indent": 8, "text": ["Terrain Attribute"], "extent": [1036, 1063], "container": true, "type": "dt"}, {"body": [{"indent": 12, "type": "para", "extent": [1210, 1517], "text": ["Amount of degrees needed to consider changing the projection attribute.\n            For an example where the terrain is a hilly surface with multiple projection attribute values spread across its surface, it can be useful to limit the amount of projection changes to major terrain differences."]}], "indent": 8, "text": ["Projection Change Threshold Degrees"], "extent": [1165, 1210], "container": true, "type": "dt"}], "container": true, "type": "dt_group"}], "indent": 4, "text": ["From Terrain Attribute"], "extent": [910, 938], "container": true, "type": "dt"}], "container": true, "type": "dt_group"}], "indent": 0, "text": ["Method"], "role": "item", "extent": [450, 459], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [1531, 1582], "text": ["Specify which plane acts as the ground plane."]}], "indent": 0, "text": ["Ground Plane"], "role": "item", "extent": [1517, 1531], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [1599, 2175], "text": ["Rotate the character around its own bounding box center before projecting it.\n    Normally, each specified hip or foot joint gets projected on to the terrain following the direction vector. In most cases, this means that the projection will not be perpendicular to the surface of the terrain. In certain situations the result can be less stretchy - especially for quadrupeds - if the character is rotated before being projected. The effect is the same as rotating the projection direction vector with the minor exception that the projection will have no position offset."]}], "indent": 0, "text": ["Rotate Skeleton"], "role": "item", "extent": [1582, 1599], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}, {"body": [{"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [2212, 2498], "text": ["Specify the hip joint of the character by name.\n    Multiple hip joints can be specified. For example, in case of a quadruped you will want to select both the pelvis as well as the chest joints as to both front and back legs are touching the terrain and will have to be projected."]}], "indent": 0, "text": ["Hip Joint"], "role": "item", "extent": [2200, 2212], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2510, 2584], "text": ["Offsets the hip joint after it has been projected on to the terrain."]}], "indent": 0, "text": ["Hip Offset"], "role": "item", "extent": [2498, 2510], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2600, 2689], "text": ["Enable or disable hip leaning for this hip joint and control the amount of leaning."]}], "indent": 0, "text": ["Hip Lean Blend"], "role": "item", "extent": [2584, 2600], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2699, 3048], "text": ["Specify a custom axis to rotate the hip joint around. \n    The axis will be automatically computed. This option allows you to overwrite that computation.\n    The axis expected is the \"front\" axis of the hip joint. If we think of the up axis as the axis pointing towards the sky, then the forward axis is pointing towards the character\u2019s front."]}], "indent": 0, "text": ["Hip Axis"], "role": "item", "extent": [2689, 2699], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 3, "text": ["Hips"], "extent": [2186, 2200], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [3081, 3141], "text": ["Specify the knee joint of the character\u2019s leg by name."]}], "indent": 0, "text": ["Knee Joint"], "role": "item", "extent": [3068, 3081], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3154, 3215], "text": ["Specify the ankle joint of the character\u2019s leg by name."]}], "indent": 0, "text": ["Ankle Joint"], "role": "item", "extent": [3141, 3154], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3226, 3407], "text": ["Specify the toe joint of the character\u2019s foot by name. This field is optional. The toe joint is used to get the proper rotation of the ankle joint after it has been projected."]}], "indent": 0, "text": ["Toe Joint"], "role": "item", "extent": [3215, 3226], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3421, 3497], "text": ["Offsets the ankle joint after it has been projected on to the terrain."]}], "indent": 0, "text": ["Ankle Offset"], "role": "item", "extent": [3407, 3421], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3509, 3583], "text": ["Offsets the toe joint after it has been projected on to the terrain."]}], "indent": 0, "text": ["Toe Offset"], "role": "item", "extent": [3497, 3509], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3600, 3706], "text": ["Enable or disable terrain-based foot lifting for this ankle joint and control the amount of lifting."]}], "indent": 0, "text": ["Foot Lift Blend"], "role": "item", "extent": [3583, 3600], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3725, 3974], "text": ["Specify a custom axis to rotate the ankle joint around. \n    The axis will be automatically computed. This option allows you to overwrite that computation.\n    The axis expected is the axis of the ankle joint that is pointing at the toe joint."]}], "indent": 0, "text": ["Ankle Lookat Axis"], "role": "item", "extent": [3706, 3725], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 3, "text": ["Lower Limbs"], "extent": [3048, 3068], "container": true, "type": "h", "id": null}], "indent": 0, "level": 2, "text": ["Main"], "extent": [2175, 2186], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [4027, 4136], "text": ["Enable hip leaning forward or backward when the projected character is ascending or descending a slope."]}], "indent": 0, "text": ["Enable Leaning"], "role": "item", "extent": [4010, 4027], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4152, 4216], "text": ["Specify how much the hips can rotate backward and forward."]}], "indent": 0, "text": ["Hip Lean Range"], "role": "item", "extent": [4136, 4152], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4240, 4328], "text": ["Specify the maximum amount, in degrees, that the hip joints can rotate each frame."]}], "indent": 0, "text": ["Max Rotation Per Frame"], "role": "item", "extent": [4216, 4240], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4355, 4433], "text": ["Specify the maximum amount that the hip joints can translate each frame."]}], "indent": 0, "text": ["Max Translation Per Frame"], "role": "item", "extent": [4328, 4355], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4450, 4740], "text": ["When dealing with quadrupeds or characters with multiple hip-like joints, this option limits the amount of extension that can occur in the spine as a result of the projection. A value of 0 means that no extension is allowed, a value of 1 means that any amount of extension is allowed."]}], "indent": 0, "text": ["Spine Extension"], "role": "item", "extent": [4433, 4450], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4759, 5051], "text": ["When dealing with quadrupeds or characters with multiple hip-like joints, this option limits the amount of compression that can occur in the spine as a result of projecting. A value of 0 means that no compression is allowed, a value of 1 means that any amount of compression is allowed."]}], "indent": 0, "text": ["Spine Compression"], "role": "item", "extent": [4740, 4759], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 3, "text": ["Hip Options"], "extent": [3989, 4010], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [5100, 5250], "text": ["Rotate the ankle joints to look at the toe joints.\n    When projected on to a surface, this will basically orient the foot to match the surface."]}], "indent": 0, "text": ["Enable Ankle To Toe Lookat"], "role": "item", "extent": [5071, 5100], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [5282, 5552], "text": ["Enable lifting the feet based on the terrain slope.\n    This option will adjust the step height of the input animation in accordance to the terrain underneath. A steep ascending slope will make a step rise higher - a steep descending slope will make it sink lower."]}], "indent": 0, "text": ["Enable Terrain-Based Foot Lift"], "role": "item", "extent": [5250, 5282], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [5569, 5688], "text": ["Control the global value of the foot lift. A value of 0 means no foot lift, a value of 1 means maximum foot lift."]}], "indent": 0, "text": ["Foot Lift Blend"], "role": "item", "extent": [5552, 5569], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [5727, 5884], "text": ["Specify the name of the ", {"text": "", "fullpath": "/nodes/sop/kinefx--stabilizejoint", "scheme": "Node", "type": "link", "value": "/nodes/sop/kinefx--stabilizejoint"}, " position output attribute name that will be used to find all the foot steps in the animation."]}], "indent": 0, "text": ["Position Stabilization Attribute Name"], "role": "item", "extent": [5688, 5727], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 3, "text": ["Leg Options"], "extent": [5051, 5071], "container": true, "type": "h", "id": null}], "indent": 0, "level": 2, "text": ["Advanced"], "extent": [3974, 3989], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [5904, 5988], "text": ["Use a ", {"text": "", "fullpath": "/nodes/sop/kinefx--fullbodyik", "scheme": "Node", "type": "link", "value": "/nodes/sop/kinefx--fullbodyik"}, " to solve internally and output the result."]}], "indent": 0, "text": ["Solve"], "role": "item", "extent": [5896, 5904], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [6009, 6121], "text": ["Use toe joints, if specified, as fullbodyik drivers. Otherwise, only the hip and foot joints will be used."]}], "indent": 0, "text": ["Use Toes as Drivers"], "role": "item", "extent": [5988, 6009], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [6133, 6173], "text": ["See ", {"text": "", "fullpath": "/nodes/sop/kinefx--fullbodyik", "scheme": "Node", "type": "link", "value": "/nodes/sop/kinefx--fullbodyik"}, "."]}], "indent": 0, "text": ["Iterations"], "role": "item", "extent": [6121, 6133], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [6182, 6222], "text": ["See ", {"text": "", "fullpath": "/nodes/sop/kinefx--fullbodyik", "scheme": "Node", "type": "link", "value": "/nodes/sop/kinefx--fullbodyik"}, "."]}], "indent": 0, "text": ["Damping"], "role": "item", "extent": [6173, 6182], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [6233, 6273], "text": ["See ", {"text": "", "fullpath": "/nodes/sop/kinefx--fullbodyik", "scheme": "Node", "type": "link", "value": "/nodes/sop/kinefx--fullbodyik"}, "."]}], "indent": 0, "text": ["Tolerance"], "role": "item", "extent": [6222, 6233], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [6321, 6408], "text": ["Initialize a set of default configurations for the ", {"text": "", "fullpath": "/nodes/sop/kinefx--fullbodyik", "scheme": "Node", "type": "link", "value": "/nodes/sop/kinefx--fullbodyik"}, "."]}], "indent": 0, "text": ["Default Configurations"], "role": "item", "extent": [6296, 6321], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [6441, 6532], "text": ["Enabling this will output the ", {"text": "", "fullpath": "/nodes/sop/kinefx--fullbodyik", "scheme": "Node", "type": "link", "value": "/nodes/sop/kinefx--fullbodyik"}, " configuration attributes."]}], "indent": 0, "text": ["Output Configuration Attributes"], "role": "item", "extent": [6408, 6441], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [6555, 6604], "text": ["See ", {"text": "", "fullpath": "/nodes/sop/kinefx--fbikconfiguretargets", "scheme": "Node", "type": "link", "value": "/nodes/sop/kinefx--fbikconfiguretargets"}]}], "indent": 0, "text": ["Target Configurations"], "role": "item", "extent": [6532, 6555], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [6626, 6674], "text": ["See ", {"text": "", "fullpath": "/nodes/sop/kinefx--fbikconfigurejoints", "scheme": "Node", "type": "link", "value": "/nodes/sop/kinefx--fbikconfigurejoints"}]}], "indent": 0, "text": ["Joint Configurations"], "role": "item", "extent": [6604, 6626], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 3, "text": ["Configurations"], "extent": [6273, 6296], "container": true, "type": "h", "id": null}], "indent": 0, "level": 2, "text": ["Solve"], "extent": [5884, 5896], "container": true, "type": "h", "id": null}], "indent": 0, "level": 1, "text": "Parameters", "role": "section", "extent": [438, 450], "container": true, "type": "parameters_section", "id": "parameters"}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [6700, 6734], "text": ["The input skeleton to adapt."]}], "indent": 0, "text": ["Target Skeleton"], "extent": [6682, 6700], "container": true, "type": "dt"}, {"body": [{"indent": 4, "type": "para", "extent": [6746, 7235], "text": ["The animated input skeleton, in the form of ", {"text": "", "fullpath": "/nodes/sop/kinefx--motionclip", "scheme": "Node", "type": "link", "value": "/nodes/sop/kinefx--motionclip"}, ". This input can be useful if you want to modify the transforms of the driver joints before adapting them to the ", {"text": ["Terrain"], "type": "strong"}, " and solving the ", {"text": ["Target Skeleton"], "type": "strong"}, " using a ", {"text": "", "fullpath": "/nodes/sop/kinefx--fullbodyik", "scheme": "Node", "type": "link", "value": "/nodes/sop/kinefx--fullbodyik"}, ". A common example is to use the ", {"text": "", "fullpath": "/nodes/sop/kinefx--stabilizejoint", "scheme": "Node", "type": "link", "value": "/nodes/sop/kinefx--stabilizejoint"}, " to plant the feet, set the ", {"text": ["Mode"], "type": "strong"}, " to ", {"text": ["Pass Through"], "type": "strong"}, " and wire the ", {"text": ["Target Skeleton"], "type": "strong"}, " to the ", {"text": ["Target Skeleton"], "type": "strong"}, " and the ", {"text": ["MotionClip"], "type": "strong"}, " to the ", {"text": ["MotionClip"], "type": "strong"}, "."]}], "indent": 0, "text": ["MotionClip"], "extent": [6734, 6746], "container": true, "type": "dt"}, {"body": [{"indent": 4, "type": "para", "extent": [7244, 7305], "text": ["The terrain geometry to adapt the ", {"text": ["Target Skeleton"], "type": "strong"}, " to."]}], "indent": 0, "text": ["Terrain"], "extent": [7235, 7244], "container": true, "type": "dt"}], "container": true, "type": "dt_group"}], "indent": 0, "level": 1, "text": "Inputs", "role": "section", "extent": [6674, 6682], "container": true, "type": "inputs_section", "id": "inputs"}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [7332, 7365], "text": ["The adapted input skeleton."]}], "indent": 0, "text": ["Target Skeleton"], "extent": [7314, 7332], "container": true, "type": "dt"}, {"body": [{"indent": 4, "type": "para", "extent": [7380, 7703], "text": ["The motion trails of the driver joints: Hip Joints and Leg Joints. In certain situations, you will want to manipulate the result of the this node further, without using the ", {"text": "", "fullpath": "/nodes/sop/kinefx--fullbodyik", "scheme": "Node", "type": "link", "value": "/nodes/sop/kinefx--fullbodyik"}, " inside to solve. For these situations, you can use the motion trails output, manipulate them and then solve later."]}], "indent": 0, "text": ["Motion Trails"], "extent": [7365, 7380], "container": true, "type": "dt"}], "container": true, "type": "dt_group"}], "indent": 0, "level": 1, "text": "Outputs", "role": "section", "extent": [7305, 7314], "container": true, "type": "outputs_section", "id": "outputs"}, {"body": [{"body": [{"indent": 4, "blevel": 6, "type": "bullet", "extent": [7712, 7751], "text": [{"text": "", "fullpath": "/nodes/sop/kinefx--stabilizejoint", "scheme": "Node", "type": "link", "value": "/nodes/sop/kinefx--stabilizejoint"}]}], "container": true, "type": "bullet_group"}], "indent": 0, "level": 1, "text": "Related", "role": "section", "extent": [7703, 7712], "container": true, "type": "related_section", "id": "related"}], "summary": ["Adapts a character\u2019s skeleton to conform to terrain."], "type": "root", "attrs": {"version": "", "tags": "character, animation, retargeting", "since": "18.5", "namespace": "kinefx", "internal": "adapttoterrain", "context": "sop", "type": "node", "icon": "SOP/kinefx-adapttoterrain"}, "title": ["Adapt to Terrain"]}