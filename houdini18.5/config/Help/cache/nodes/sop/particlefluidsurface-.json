{"body": [{"indent": 0, "text": ["Particle Fluid Surface"], "type": "title", "extent": [125, 152], "level": 0}, {"indent": 0, "type": "summary", "extent": [152, 245], "text": ["Generates a polygonal surface around the particles from a particle fluid simulation."]}, {"indent": 0, "type": "para", "extent": [245, 597], "text": ["Connect geometry containing the particle field from a particle fluid simulation to ", {"text": ["Input 1"], "type": "code"}, " of this node to generate a surface around the particle field.  Any set of points may be used as an input to this SOP, provided the ", {"text": ["pscale"], "type": "code"}, " point attribute is defined in the input.  If it\u2019s not, a default ", {"text": ["pscale"], "type": "code"}, " value of 0.1 is used for all inputs points."]}, {"indent": 0, "type": "para", "extent": [597, 711], "text": ["Optionally, volume primitives may be subtracted from the surface prior to polygonization using the second input."]}, {"indent": 0, "type": "para", "extent": [711, 1260], "text": ["This SOP is similar to ", {"text": ["Volume Surface"], "fullpath": "/nodes/sop/volumesurface", "scheme": "Node", "type": "link", "value": "/nodes/sop/volumesurface"}, " since both create a surface over either a volume or particles; however, they are used for different purposes. The Volume Surface SOP is intended for static objects and create one surface over all volumes, whereas Particle Fluid Surface is intended for objects that have motion and create separate surfaces over individual clusters. For example, the Volume Surface SOP can be used to simulate a ski trail on a mountain, and the Particle Fluid Surface could be used to simulate a river."]}, {"indent": 0, "type": "para", "extent": [1260, 1373], "text": ["See the ", {"text": ["Particle Fluid Solver"], "fullpath": "/nodes/dop/particlefluidsolver", "scheme": "Node", "type": "link", "value": "/nodes/dop/particlefluidsolver"}, " dynamics help for examples of how to use this SOP."]}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [1378, 1607], "text": ["Adding the ", {"text": ["Peak SOP"], "fullpath": "/nodes/sop/peak", "scheme": "Node", "type": "link", "value": "/nodes/sop/peak"}, " after this node, with a very low ", {"text": ["Distance"], "type": "ui"}, " value such as ", {"text": ["0.01"], "type": "code"}, ", will make your simulation appear less blobby. This is useful for simulating any organic fluid, such as splashing water."]}], "indent": 0, "role": "item", "extent": [1373, 1378], "container": true, "type": "tip"}], "container": true, "role": "item_group", "type": "tip_group"}, {"body": [{"body": [{"indent": 0, "type": "para", "extent": [1635, 1686], "text": ["Use this tab to specify basic surface parameters."]}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [1697, 1757], "text": ["The polygon size to use when polygonizing the surface."]}], "indent": 0, "text": ["Step Size"], "role": "item", "extent": [1686, 1697], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [1777, 2578], "text": ["This SOP generates geometry using an implicit function similar to the one used when\n    generating geometry around metaballs.  Namely, each particle in the input has associated with it a radius of influence in which it can affect the surface.  Initially, this radius is established by each particle\u2019s ", {"text": ["pscale"], "type": "code"}, " attribute.  This parameter scales that radius of influence.  Increasing this parameter causes each point on the generated surface to be sampled from a larger set of a particles.  This means that the resulting surface may appear smoother, but will also have less detail.  Similarly, decreasing this\n    parameter causes each point on the generated surface to be sampled from a smaller set of particles, potentially resulting in more detail at the cost of making the surface less smooth."]}], "indent": 0, "text": ["Point Radius Scale"], "role": "item", "extent": [1757, 1777], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2586, 2622], "text": ["Average Position, or Metaball."]}], "indent": 0, "text": ["Method"], "role": "item", "extent": [2578, 2586], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2640, 3026], "text": ["Controls the thickness of the surface around the particle field. Larger values here create a surface which lies farther away from the fluid particles.  Smaller values may force the fluid surface to wrap the particles more tightly, but may also cause\n    the surface to lie inside of the particle field.  This parameter is scaled internally by the ", {"text": ["Point Radius Scale"], "type": "ui"}, " parameter."]}], "indent": 0, "text": ["Surface Distance"], "role": "item", "extent": [2622, 2640], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3045, 3145], "text": ["Increasing this parameter has the effect of tightening the surface around the fluid particles."]}], "indent": 0, "text": ["Surface Tightness"], "role": "item", "extent": [3026, 3045], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3153, 3233], "text": ["Specifies the interpolating ", {"fragment": "#kernels", "text": ["metaball kernel"], "value": "/nodes/sop/metaball#kernels", "fullpath": "/nodes/sop/metaball#kernels", "scheme": null, "type": "link"}, "."]}], "indent": 0, "text": ["Kernel"], "role": "item", "extent": [3145, 3153], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3241, 3285], "text": ["Specifies the weight of each metaball."]}], "indent": 0, "text": ["Weight"], "role": "item", "extent": [3233, 3241], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3309, 3444], "text": ["When this option is enabled, particles with no neighbor\u2019s within their support radii are excluded from the surfacing calculation."]}], "indent": 0, "text": ["Exclude Lone Particles"], "role": "item", "extent": [3285, 3309], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3464, 3579], "text": ["When this option is enabled, a polygon soup primitive will be created instead of separate polygon primitives."]}], "indent": 0, "text": ["Build Polygon Soup"], "role": "item", "extent": [3444, 3464], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 2, "text": ["Surface"], "extent": [1619, 1635], "container": true, "type": "h", "id": null}, {"body": [{"indent": 0, "type": "para", "extent": [3599, 3681], "text": ["Use this tab to specify a bounding box in which the surface should be generated."]}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [3704, 3789], "text": ["Only generate surface polygons inside of the explicitly specified bounding box."]}], "indent": 0, "text": ["Override Bounding Box"], "role": "item", "extent": [3681, 3704], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3804, 3866], "text": ["The minimum boundaries of the user-defined bounding box."]}], "indent": 0, "text": ["Minimum Bound"], "role": "item", "extent": [3789, 3804], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3881, 3943], "text": ["The maximum boundaries of the user-defined bounding box."]}], "indent": 0, "text": ["Maximum Bound"], "role": "item", "extent": [3866, 3881], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 2, "text": ["Bounding Box"], "extent": [3579, 3599], "container": true, "type": "h", "id": null}, {"body": [{"indent": 0, "type": "para", "extent": [3968, 4154], "text": ["Use this tab to specify volume primitives to be subtracted from the fluid surface.  This can be used to ensure that the generated surface does not penetrate other objects in the scene."]}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [4182, 4296], "text": ["When this option is enabled, volume primitives specified in ", {"text": ["Input 2"], "type": "code"}, " are subtracted from the fluid surface."]}], "indent": 0, "text": ["Subtract Collision Volumes"], "role": "item", "extent": [4154, 4182], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4314, 4387], "text": ["The distance from the collision volume at which subtraction occurs."]}], "indent": 0, "text": ["Collision Offset"], "role": "item", "extent": [4296, 4314], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 2, "text": ["Collision Volumes"], "extent": [3943, 3968], "container": true, "type": "h", "id": null}, {"body": [{"indent": 0, "type": "para", "extent": [4405, 4508], "text": ["This tab is used to transfer point attributes from the input particle field to the generated surface."]}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [4513, 4670], "text": ["Use this tab to transfer the velocity attribute ", {"text": ["v"], "type": "code"}, " onto the fluid surface so that the generated surface has a velocity vector defined for motion blur."]}], "indent": 0, "role": "item", "extent": [4508, 4513], "container": true, "type": "tip"}], "container": true, "role": "item_group", "type": "tip_group"}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [4682, 4778], "text": ["Specifies the list of point attributes to transfer from the particles to the fluid surface."]}], "indent": 0, "text": ["Attributes"], "role": "item", "extent": [4670, 4682], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4795, 4861], "text": ["Computes normals based on the gradient of the fluid density."]}], "indent": 0, "text": ["Compute Normals"], "role": "item", "extent": [4778, 4795], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 2, "text": ["Attributes"], "extent": [4387, 4405], "container": true, "type": "h", "id": null}, {"body": [{"indent": 0, "type": "para", "extent": [4885, 4996], "text": ["This tab is used to produce the effect of the fluid surface stretching backwards along its velocity vector.  "]}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [5002, 5112], "text": ["This feature is incompatible with the ", {"text": ["Exclude Lone Particles"], "type": "ui"}, " parameter found in the ", {"text": ["Surface"], "type": "ui"}, " tab."]}], "indent": 0, "role": "item", "extent": [4996, 5002], "container": true, "type": "note"}], "container": true, "role": "item_group", "type": "note_group"}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [5137, 5266], "text": ["When this parameter is enabled, the SOP stretches the surface in the opposite direction of each particle\u2019s velocity vector."]}], "indent": 0, "text": ["Enable Speed Stretching"], "role": "item", "extent": [5112, 5137], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [5287, 5461], "text": ["Speed stretching is accomplished by making copies of a particle along its velocity vector.  This parameter controls the number of copies of each particle that are used."]}], "indent": 0, "text": ["Particle Duplicates"], "role": "item", "extent": [5266, 5287], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [5483, 5738], "text": ["When this parameter is enabled the distance at which particles are trailed behind input particles is scaled on a per-particle basis by the particle scale of each input particle.\n    This is useful when inputs to the SOP have varying particle scales."]}], "indent": 0, "text": ["Scale Stretch Length"], "role": "item", "extent": [5461, 5483], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [5756, 5867], "text": ["Each input particle is stretched according to the length of its velocity vector scaled by this parameter."]}], "indent": 0, "text": ["Stretch Fraction"], "role": "item", "extent": [5738, 5756], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [5891, 5953], "text": ["The maximum distance that any particle may be stretched."]}], "indent": 0, "text": ["Maximum Stretch Length"], "role": "item", "extent": [5867, 5891], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [5974, 6278], "text": ["Setting this parameter to anything other than one will cause the duplicated stretch particles to differ in size from the original particle.  This controls the ratio in size of the smallest stretch particle (which is positioned farthest away from the original\n    particle) to the original particle."]}], "indent": 0, "text": ["Particle Size Ratio"], "role": "item", "extent": [5953, 5974], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 2, "text": ["Speed Stretching"], "extent": [4861, 4885], "container": true, "type": "h", "id": null}, {"body": [{"indent": 0, "type": "para", "extent": [6294, 6433], "text": ["Filtering can be used to smooth out small details in the generated\nsurface, while also tightening the surface around the input particles."]}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [6438, 6653], "text": ["Setting ", {"text": ["Method"], "type": "ui"}, " in the ", {"text": ["Surface"], "type": "ui"}, " tab to \"Metaball\" generates a surface that encloses the input particles.  Filtering can then be used to refine this surface to make it appear smoother and more fluid-like."]}], "indent": 0, "role": "item", "extent": [6433, 6438], "container": true, "type": "tip"}], "container": true, "role": "item_group", "type": "tip_group"}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [6671, 6716], "text": ["Enables/disables the filtering feature."]}], "indent": 0, "text": ["Enable Filtering"], "role": "item", "extent": [6653, 6671], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [6730, 7204], "text": ["Filtering is an iterative process.  This parameter controls the number of filter iterations to perform.  Increasing the number of filter steps further smooths out details in the generated surface and, depending on the ", {"text": ["Filter Tightness"], "type": "ui"}, " parameter, may cause the surface to further shrink around its input particles.  More detailed geometry (surfaces with smaller ", {"text": ["Step Size"], "type": "ui"}, " parameters) will require more steps to achieve the same effect as less detailed surfaces."]}], "indent": 0, "text": ["Filter Steps"], "role": "item", "extent": [6716, 6730], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [7218, 7550], "text": ["When this SOP generates a surface, it computes surface density values on a grid with cell sizes specified by the ", {"text": ["Step Size"], "type": "ui"}, " parameter. Filtering is achieved by blending together values from each grid cell and some number of adjacent cells.  This parameter controls the number of grid cells involved in each blend operation."]}], "indent": 0, "text": ["Filter Width"], "role": "item", "extent": [7204, 7218], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [7568, 7756], "text": ["Increasing this parameter causes the filtering operation to \"shrink\" the generated surface.  This effect can be used to move the generated surface closer to the input particle field."]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [7766, 7964], "text": ["This feature works primarily when ", {"text": ["Metaball"], "type": "ui"}, " is specified in the ", {"text": ["Method"], "type": "ui"}, " parameter.  Its effect is somewhat counter-intuitive when ", {"text": ["Average Position"], "type": "ui"}, " is specified in this parameter."]}], "indent": 4, "role": "item", "extent": [7756, 7766], "container": true, "type": "note"}], "container": true, "role": "item_group", "type": "note_group"}], "indent": 0, "text": ["Filter Tightness"], "role": "item", "extent": [7550, 7568], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [7983, 8091], "text": ["When this parameter is enabled, attributes transferred to the surface also have their values filtered."]}], "indent": 0, "text": ["Filter Attributes"], "role": "item", "extent": [7964, 7983], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 2, "text": ["Filtering"], "extent": [6278, 6294], "container": true, "type": "h", "id": null}], "indent": 0, "level": 1, "text": "Parameters", "role": "section", "extent": [1607, 1619], "container": true, "type": "parameters_section", "id": "parameters"}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [8122, 8179], "text": ["The particle geometry to generate a surface around."]}], "indent": 0, "text": ["Particle Fluid Field"], "extent": [8099, 8122], "container": true, "type": "dt"}, {"body": [{"indent": 4, "type": "para", "extent": [8198, 8257], "text": ["Volume primitives to subtract from the fluid surface."]}], "indent": 0, "text": ["Collision Volumes"], "extent": [8179, 8198], "container": true, "type": "dt"}], "container": true, "type": "dt_group"}], "indent": 0, "level": 1, "text": "Inputs", "role": "section", "extent": [8091, 8099], "container": true, "type": "inputs_section", "id": "inputs"}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [8275, 8299], "text": ["The fluid surface."]}], "indent": 0, "text": ["Output"], "extent": [8266, 8275], "container": true, "type": "dt"}], "container": true, "type": "dt_group"}], "indent": 0, "level": 1, "text": "Outputs", "role": "section", "extent": [8257, 8266], "container": true, "type": "outputs_section", "id": "outputs"}, {"body": [{"body": [{"indent": 0, "blevel": 2, "type": "bullet", "extent": [8308, 8342], "text": [{"text": "", "fullpath": "/nodes/dop/particlefluidobject", "scheme": "Node", "type": "link", "value": "/nodes/dop/particlefluidobject"}]}, {"indent": 0, "blevel": 2, "type": "bullet", "extent": [8342, 8375], "text": [{"text": "", "fullpath": "/nodes/dop/particlefluidsolver", "scheme": "Node", "type": "link", "value": "/nodes/dop/particlefluidsolver"}]}], "container": true, "type": "bullet_group"}], "indent": 0, "level": 1, "text": "Related", "role": "section", "extent": [8299, 8308], "container": true, "type": "related_section", "id": "related"}], "summary": ["Generates a polygonal surface around the particles from a particle fluid simulation."], "type": "root", "attrs": {"index": "no", "version": "", "tags": "fluid, surface", "namespace": null, "internal": "particlefluidsurface", "context": "sop", "type": "node", "icon": "SOP/particlefluidsurface"}, "title": ["Particle Fluid Surface"]}