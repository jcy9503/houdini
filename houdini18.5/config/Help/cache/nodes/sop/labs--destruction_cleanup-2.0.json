{"body": [{"indent": 0, "text": ["Labs Destruction Cleanup"], "type": "title", "extent": [0, 29], "level": 0}, {"indent": 0, "type": "summary", "extent": [151, 277], "text": [" Prepare rigid body simulation results for export, reducing redundant geometry, cleaning normals, cleaing attributes. "]}, {"indent": 0, "type": "para", "extent": [277, 317], "text": [{"text": "", "fullpath": "/movies/destructioncleanup.gif", "scheme": "Image", "type": "link", "value": "/movies/destructioncleanup.gif"}]}, {"body": [{"indent": 0, "type": "para", "extent": [332, 462], "text": ["Rigid body simulation can require substantial cleanup before being ready for export. This HDA tackles the most frequent issues:"]}, {"body": [{"indent": 0, "blevel": 2, "type": "bullet", "extent": [462, 486], "text": ["removing small pieces"]}, {"indent": 0, "blevel": 2, "type": "bullet", "extent": [486, 518], "text": ["fixing normals on sharp edges"]}, {"indent": 0, "blevel": 2, "type": "bullet", "extent": [518, 590], "text": ["identifying and combining pieces that can be treated as a single unit"]}, {"indent": 0, "blevel": 2, "type": "bullet", "extent": [590, 638], "text": ["clean up unnecessary dops specific attributes"]}, {"indent": 0, "blevel": 2, "type": "bullet", "extent": [638, 709], "text": ["identify a region of interest, freeze pieces outside of that region"]}], "container": true, "type": "bullet_group"}], "indent": 0, "level": 2, "text": ["Overview"], "extent": [317, 332], "container": true, "type": "h", "id": null}, {"body": [{"indent": 0, "type": "para", "extent": [741, 885], "text": ["Taking the result of a RBD sim and connecting to this sop will immediately remove most attributes that aren\u2019t useful outside of a simulation."]}, {"indent": 0, "type": "para", "extent": [885, 1249], "text": ["When freeze transform is enabled and a threshold is set, this tool records where each piece is at the first frame and last frame of the simulation range, and if the total distance travelled is less than the freeze threshold, that piece has its animation removed. All frozen pieces are merged together, which can substantially lighten the final exported geometry."]}, {"indent": 0, "type": "para", "extent": [1249, 1453], "text": ["If a bounding box is attached to the second input and 'Clamped Bounds' is enabled, RBD pieces outside outside this region will have their animation removed and be moved to the 'Clamp Position' location."]}, {"indent": 0, "type": "para", "extent": [1453, 1641], "text": ["The node will attempt to optimize output by grouping pieces into chunks. This can take a long time for large frame sequences. To disable, toggle off the Optimize Pieces Into Chunks parm."]}], "indent": 0, "level": 2, "text": ["Using Destruction Cleanup"], "extent": [709, 741], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [1676, 1721], "text": ["The packed rigid body simulation pieces."]}], "indent": 0, "text": ["RBD Import (DOP or Cache)"], "extent": [1649, 1676], "container": true, "type": "dt"}, {"body": [{"indent": 4, "type": "para", "extent": [1746, 1824], "text": ["The bounding box used for optimisation when 'clamped bounds' is active."]}], "indent": 0, "text": ["(Optional) Bounding Box"], "extent": [1721, 1746], "container": true, "type": "dt"}], "container": true, "type": "dt_group"}], "indent": 0, "level": 1, "text": "Inputs", "role": "section", "extent": [1641, 1649], "container": true, "type": "inputs_section", "id": "inputs"}, {"body": [{"body": [{"body": [{"body": [{"indent": 8, "type": "para", "extent": [1874, 2058], "text": ["The simulation range determines what the framerange is that will be used for the data analysis. It is recommended to leave these to the start and end frame of your simulation."]}], "indent": 4, "text": ["Simulation Range"], "role": "item", "extent": [1852, 1874], "container": true, "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [2080, 2153], "text": ["This controls whether or not unique chunks should be colorcoded."]}], "indent": 4, "text": ["Visualize Chunks"], "role": "item", "extent": [2058, 2080], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 4, "level": 2, "text": ["Basic"], "extent": [1836, 1852], "container": true, "type": "h", "id": null}, {"body": [], "indent": 4, "level": 2, "text": ["Cleanup Properties"], "extent": [2153, 2182], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"indent": 8, "type": "para", "extent": [2220, 2338], "text": ["This controls if surface points should be fused together. This will also trigger the removal of inside faces."]}], "indent": 4, "text": ["Remove Insides"], "role": "item", "extent": [2200, 2220], "container": true, "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [2357, 2447], "text": ["This controls the fusing threshold in units for surface points close to eachother"]}], "indent": 4, "text": ["Fuse Distance"], "role": "item", "extent": [2338, 2357], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 4, "level": 2, "text": ["Insides"], "extent": [2182, 2200], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"indent": 8, "type": "para", "extent": [2484, 2576], "text": ["This controls if polygon cusping should be applied to the newly generated geometry."]}], "indent": 4, "text": ["Cusp Polygons"], "role": "item", "extent": [2465, 2484], "container": true, "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [2586, 2684], "text": ["Select if cusping should be universal, or applied to inside and outside faces seperately."]}], "indent": 4, "text": ["Cusp"], "role": "item", "extent": [2576, 2586], "container": true, "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [2707, 2759], "text": ["Group or face id\u2019s to use for inside prims."]}], "indent": 4, "text": ["Inside Primitives"], "role": "item", "extent": [2684, 2707], "container": true, "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [2782, 3017], "text": ["When computing vertex normals, if normals of vertices around a single point are less than or equal to this angle (in degrees) apart from each other, they will be averaged together, weighted by the vertex angle in each polygon."]}], "indent": 4, "text": ["Inside Cusp Angle"], "role": "item", "extent": [2759, 2782], "container": true, "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [3039, 3803], "text": ["When set to By Vertex Angle, care is taken when computing normals to try to avoid issues introduced by sliver polygons and to weight contributions to normals by angle, so that triangulation won\u2019t change normals significantly. When set to Each Vertex Equally, a faster, but less accurate, approach similar to the approach used by the Facet SOP, is used to compute normals, where each vertex is given equal weight around a point, and less checks are done for ensuring stability. When set to By Face Area, the behavior is similar to __Each Vertex Equally_, except that vertices on faces with more area will be given more weight when computing point normals. This is often used to fake the appearance of a smooth bevel for geometry with only a simple chamfer."]}], "indent": 4, "text": ["Weighting Method"], "role": "item", "extent": [3017, 3039], "container": true, "type": "parameters_item"}, {"body": [{"indent": 9, "type": "para", "extent": [3827, 3880], "text": ["Group or face id\u2019s to use for inside prims."]}], "indent": 4, "text": ["Outside Primitives"], "role": "item", "extent": [3803, 3827], "container": true, "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [3904, 4139], "text": ["When computing vertex normals, if normals of vertices around a single point are less than or equal to this angle (in degrees) apart from each other, they will be averaged together, weighted by the vertex angle in each polygon."]}], "indent": 4, "text": ["Outside Cusp Angle"], "role": "item", "extent": [3880, 3904], "container": true, "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [4155, 4390], "text": ["When computing vertex normals, if normals of vertices around a single point are less than or equal to this angle (in degrees) apart from each other, they will be averaged together, weighted by the vertex angle in each polygon."]}], "indent": 4, "text": ["Cusp Angle"], "role": "item", "extent": [4139, 4155], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 4, "level": 2, "text": ["Cusping"], "extent": [2447, 2465], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"indent": 8, "type": "para", "extent": [4431, 4547], "text": ["This controls whether or not a new name attribute should be generated per unique optimized packed primitive"]}], "indent": 4, "text": ["Generate Name"], "role": "item", "extent": [4412, 4431], "container": true, "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [4557, 4645], "text": ["This controls the prefix applied to packed primitives coming out of the output."]}], "indent": 4, "text": ["Name"], "role": "item", "extent": [4547, 4557], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 4, "level": 2, "text": ["Piece Names"], "extent": [4390, 4412], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"indent": 8, "type": "para", "extent": [4706, 4757], "text": ["Enable optimization of pieces into chunks."]}], "indent": 4, "text": ["Optimize Pieces Into Chunks (toggle)"], "role": "item", "extent": [4664, 4706], "container": true, "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [4788, 4915], "text": ["Enable piece movement detection, freeze and merge those pieces if they travel less than the freeze threshold distance."]}], "indent": 4, "text": ["Freeze Threshold (toggle)"], "role": "item", "extent": [4757, 4788], "container": true, "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [4948, 5025], "text": ["This is the threshold in units used to determine freezing of chunks."]}], "indent": 4, "text": ["Freeze Threshold (distance)"], "role": "item", "extent": [4915, 4948], "container": true, "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [5045, 5111], "text": ["This controls whether or not to apply bound optimization."]}], "indent": 4, "text": ["Clamped Bounds"], "role": "item", "extent": [5025, 5045], "container": true, "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [5131, 5202], "text": ["This controls the where bound clamped chunks will be moved to."]}], "indent": 4, "text": ["Clamp Position"], "role": "item", "extent": [5111, 5131], "container": true, "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [5227, 5395], "text": ["The name of the attribute(s) to copy. Multiple attributes may be specified. If no attribute name is provided, all of the source attributes will be copied."]}], "indent": 4, "text": ["Transfer Attributes"], "role": "item", "extent": [5202, 5227], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 4, "level": 2, "text": ["Advanced"], "extent": [4645, 4664], "container": true, "type": "h", "id": null}], "indent": 0, "level": 1, "text": "Parameters", "role": "section", "extent": [1824, 1836], "container": true, "type": "parameters_section", "id": "parameters"}], "summary": [" Prepare rigid body simulation results for export, reducing redundant geometry, cleaning normals, cleaing attributes. "], "type": "root", "attrs": {"version": "2.0", "tags": "sidefxlabs,  model", "namespace": "labs", "internal": "labs::destruction_cleanup::2.0", "context": "sop", "type": "node", "icon": "destructioncleanup"}, "title": ["Labs Destruction Cleanup"]}