{"body": [{"indent": 0, "text": ["Particle Fluid Mask"], "type": "title", "extent": [139, 163], "level": 0}, {"indent": 0, "type": "summary", "extent": [163, 229], "text": ["Generates a Volume mask from a particle fluid simulation."]}, {"indent": 0, "type": "para", "extent": [229, 429], "text": ["Connect particles and/or velocity fields from a particle fluid simulation to the ", {"text": ["Particles and Volumes"], "type": "ui"}, " input of this node to generate a volumetric mask according to several different criteria.  "]}, {"indent": 0, "type": "para", "extent": [429, 659], "text": ["Additionally one or more Ocean Spectrum layers can be connected to the third input of this node, and the generated mask can be composited into the existing spectra masks, with optional frequency filtering applied to the spectra."]}, {"body": [{"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [705, 897], "text": ["The distance between two particles in the fluid simulation. This parameter should generally reference the same parameter on the ", {"text": ["FLIP Object"], "fullpath": "/nodes/dop/flipobject", "scheme": "Node", "type": "link", "value": "/nodes/dop/flipobject"}, " of the input simulation."]}], "indent": 0, "text": ["Particle Separation"], "role": "item", "extent": [683, 705], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [915, 1188], "text": ["Scale the output mask volume relative to the input particles and/or velocity fields.  This parameter can often be set below 1, because a mask is often blurred using the ", {"text": ["Filter"], "type": "ui"}, " parameter, and very high resolution masks are usually not worth the processing expense."]}], "indent": 0, "text": ["Resolution Scale"], "role": "item", "extent": [897, 915], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [1212, 1559], "text": ["Ignore particle input and create the mask only from an input velocity volume.  In general this operation is faster than using particles and is very useful for previewing mask values; however, it will be less accurate and might miss areas where only a few particles exist and the velocity field is not defined in the source FLIP simulation.  "]}], "indent": 0, "text": ["Use Input Volumes Only"], "role": "item", "extent": [1188, 1212], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [1579, 1750], "text": ["Controls if the mask should be combined with any ocean spectra plugged into the second input, and if so, whether it should suppress or contribute to the ocean waves."]}], "indent": 0, "text": ["Spectrum Mask Type"], "role": "item", "extent": [1559, 1579], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [1786, 1935], "text": ["Generate a mask where surface areas with velocity below the minimum speed get no masking, while areas above the maximum speed get full masking."]}], "indent": 0, "text": ["Velocity Range"], "role": "item", "extent": [1769, 1786], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [1952, 2106], "text": ["Generate a mask where surface areas with vorticity below the minimum speed get no masking, while areas above the maximum vorticity get full masking."]}], "indent": 0, "text": ["Vorticity Range"], "role": "item", "extent": [1935, 1952], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2124, 2252], "text": ["Generate a mask within the specified world-space offset of any collision objects or volumes connected to the second input."]}], "indent": 0, "text": ["Collision Offset"], "role": "item", "extent": [2106, 2124], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2266, 2457], "text": ["Generate a mask where areas below the minimum height get no masking, while areas above the maximum height get full masking.   The height is measured relative to the specified ", {"text": ["Plane"], "type": "ui"}, "."]}], "indent": 0, "text": ["Height Range"], "role": "item", "extent": [2252, 2266], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2477, 2563], "text": ["The operation used to combine multiple filter masks from the ", {"text": ["Conditions"], "type": "ui"}, " tab."]}], "indent": 0, "text": ["Conditions Combine"], "role": "item", "extent": [2457, 2477], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 3, "text": ["Conditions"], "extent": [1750, 1769], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [2598, 2736], "text": ["Fade out the mask as it reaches the edge of the specified bounding box, according to the ", {"text": ["Falloff Shape"], "type": "ui"}, " and ", {"text": ["Falloff Distance"], "type": "ui"}, "."]}], "indent": 0, "text": ["Use Bounding Box"], "role": "item", "extent": [2579, 2598], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2743, 2778], "text": ["The size of the bounding box."]}], "indent": 0, "text": ["Size"], "role": "item", "extent": [2736, 2743], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2786, 2823], "text": ["The center of the bounding box."]}], "indent": 0, "text": ["Center"], "role": "item", "extent": [2778, 2786], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2838, 3132], "text": ["The shape in which the mask should falloff as it approaches the edges of the bounding box.  If creating a mask for a fluid mesh created with the ", {"text": ["Particle Fluid Surface SOP"], "fullpath": "/nodes/sop/particlefluidsurface", "scheme": "Node", "type": "link", "value": "/nodes/sop/particlefluidsurface"}, " with ", {"text": ["Flatten Geometry"], "type": "ui"}, " enabled, this value should match the flattening ", {"text": ["Shape"], "type": "ui"}, "."]}], "indent": 0, "text": ["Falloff Shape"], "role": "item", "extent": [2823, 2838], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3150, 3450], "text": ["The distance at which the mask should falloff as it approaches the edges of the bounding box.  If creating a mask for a fluid mesh created with the ", {"text": ["Particle Fluid Surface SOP"], "fullpath": "/nodes/sop/particlefluidsurface", "scheme": "Node", "type": "link", "value": "/nodes/sop/particlefluidsurface"}, " with ", {"text": ["Flatten Geometry"], "type": "ui"}, " enabled, this value should match the flattening ", {"text": ["Distance"], "type": "ui"}, "."]}], "indent": 0, "text": ["Falloff Distance"], "role": "item", "extent": [3132, 3150], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3457, 3520], "text": ["The plane in which height is measured and falloff occurs."]}], "indent": 0, "text": ["Plane"], "role": "item", "extent": [3450, 3457], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3541, 3601], "text": ["Invert the mask created by the specified bounding box."]}], "indent": 0, "text": ["Invert Bounding Box"], "role": "item", "extent": [3520, 3541], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3618, 3720], "text": ["The operation used to combine masks from the ", {"text": ["Regions"], "type": "ui"}, " tab with those from the ", {"text": ["Conditions"], "type": "ui"}, "."]}], "indent": 0, "text": ["Regions Combine"], "role": "item", "extent": [3601, 3618], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 3, "text": ["Regions"], "extent": [2563, 2579], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [3745, 3794], "text": ["The type of smoothing to apply to the mask."]}], "indent": 0, "text": ["Filter"], "role": "item", "extent": [3736, 3745], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3824, 3899], "text": ["Specify the ", {"text": ["Filter Radius"], "type": "ui"}, " in world space rather than voxel units."]}], "indent": 0, "text": ["Use World Space Radius Units"], "role": "item", "extent": [3794, 3824], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3913, 3964], "text": ["The size of the filter radius in voxel units."]}], "indent": 0, "text": ["Voxel Radius"], "role": "item", "extent": [3899, 3913], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3979, 4030], "text": ["The size of the filter radius in world units."]}], "indent": 0, "text": ["Filter Radius"], "role": "item", "extent": [3964, 3979], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4042, 4094], "text": ["The number of smoothing iterations to perform."]}], "indent": 0, "text": ["Iterations"], "role": "item", "extent": [4030, 4042], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4107, 4136], "text": ["Invert the output mask."]}], "indent": 0, "text": ["Invert Mask"], "role": "item", "extent": [4094, 4107], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4148, 4208], "text": ["Remap the output mask according to the ", {"text": ["Remap Ramp"], "type": "ui"}, "."]}], "indent": 0, "text": ["Remap Mask"], "role": "item", "extent": [4136, 4148], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4220, 4265], "text": ["The ramp for remapping the mask output."]}], "indent": 0, "text": ["Remap Ramp"], "role": "item", "extent": [4208, 4220], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 3, "text": ["Mapping"], "extent": [3720, 3736], "container": true, "type": "h", "id": null}], "indent": 0, "level": 2, "text": ["Mask"], "extent": [671, 683], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [4325, 4672], "text": ["Dampen any waves that would exist in an ocean spectrum higher than this resolution.  For example if set to 8, this spectrum will have no higher frequencies than a spectrum of resolution 8.  This parameter can be useful along with ", {"text": ["Filter Below Resolution"], "type": "ui"}, " when layering spectra and applying masks and noise to only the highest frequencies."]}], "indent": 0, "text": ["Filter Above Resolution"], "role": "item", "extent": [4299, 4325], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4697, 5053], "text": ["Dampen any waves that would exist only in an ocean spectrum lower than this resolution.  For example if set to 8, this spectrum will contain only frequencies higher than a spectrum of resolution 8.  This parameter can be useful along with ", {"text": ["Filter Above Resolution"], "type": "ui"}, " when layering spectra and applying masks and noise to only the highest frequencies."]}], "indent": 0, "text": ["Filter Below Resolution"], "role": "item", "extent": [4672, 4697], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [5078, 5147], "text": ["Dampen any waves that have a longer wavelength than this value."]}], "indent": 0, "text": ["Filter Above Wavelength"], "role": "item", "extent": [5053, 5078], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [5172, 5242], "text": ["Dampen any waves that have a shorter wavelength than this value."]}], "indent": 0, "text": ["Filter Below Wavelength"], "role": "item", "extent": [5147, 5172], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [5269, 5555], "text": ["Remove any non-spectral instanced waves, usually those created by the ", {"text": ["Ocean Waves SOP"], "fullpath": "/nodes/sop/oceanwaves", "scheme": "Node", "type": "link", "value": "/nodes/sop/oceanwaves"}, ".  Since these waves are typically low-frequency, this option is useful in combination with ", {"text": ["Filter Below Resolution"], "type": "ui"}, " to remove all low frequencies from the input spectra."]}], "indent": 0, "text": ["Remove Non-Spectral Waves"], "role": "item", "extent": [5242, 5269], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 3, "text": ["Amplitude"], "extent": [4280, 4299], "container": true, "type": "h", "id": null}], "indent": 0, "level": 2, "text": ["Spectrum"], "extent": [4265, 4280], "container": true, "type": "h", "id": null}], "indent": 0, "level": 1, "text": "Parameters", "role": "section", "extent": [659, 671], "container": true, "type": "parameters_section", "id": "parameters"}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [5587, 5665], "text": ["Particle geometry and/or velocity field, usually from a FLIP simulation."]}], "indent": 0, "text": ["Particles and Volumes"], "extent": [5563, 5587], "container": true, "type": "dt"}, {"body": [{"indent": 4, "type": "para", "extent": [5696, 5762], "text": ["Geometry and SDF volumes to subtract from the fluid surface."]}], "indent": 0, "text": ["Collision Objects and Volumes"], "extent": [5665, 5696], "container": true, "type": "dt"}, {"body": [{"indent": 4, "type": "para", "extent": [5778, 5845], "text": ["One or more ocean spectrum layers from Ocean Spectrum SOP(s)."]}], "indent": 0, "text": ["Ocean Spectrum"], "extent": [5762, 5778], "container": true, "type": "dt"}], "container": true, "type": "dt_group"}], "indent": 0, "level": 1, "text": "Inputs", "role": "section", "extent": [5555, 5563], "container": true, "type": "inputs_section", "id": "inputs"}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [5861, 5883], "text": ["The mask volume."]}], "indent": 0, "text": ["Mask"], "extent": [5854, 5861], "container": true, "type": "dt"}, {"body": [{"indent": 4, "type": "para", "extent": [5899, 6002], "text": ["The input ocean spectrum layers possibly filtered and / or with the generated mask composited in."]}], "indent": 0, "text": ["Ocean Spectrum"], "extent": [5883, 5899], "container": true, "type": "dt"}], "container": true, "type": "dt_group"}], "indent": 0, "level": 1, "text": "Outputs", "role": "section", "extent": [5845, 5854], "container": true, "type": "outputs_section", "id": "outputs"}, {"body": [{"body": [{"indent": 0, "blevel": 2, "type": "bullet", "extent": [6011, 6046], "text": [{"text": "", "fullpath": "/nodes/sop/particlefluidsurface", "scheme": "Node", "type": "link", "value": "/nodes/sop/particlefluidsurface"}]}, {"indent": 0, "blevel": 2, "type": "bullet", "extent": [6046, 6073], "text": [{"text": "", "fullpath": "/nodes/sop/oceanspectrum", "scheme": "Node", "type": "link", "value": "/nodes/sop/oceanspectrum"}]}, {"indent": 0, "blevel": 2, "type": "bullet", "extent": [6073, 6097], "text": [{"text": "", "fullpath": "/nodes/dop/flipsolver", "scheme": "Node", "type": "link", "value": "/nodes/dop/flipsolver"}]}, {"indent": 0, "blevel": 2, "type": "bullet", "extent": [6097, 6124], "text": [{"text": "", "fullpath": "/nodes/sop/fluidcompress", "scheme": "Node", "type": "link", "value": "/nodes/sop/fluidcompress"}]}], "container": true, "type": "bullet_group"}], "indent": 0, "level": 1, "text": "Related", "role": "section", "extent": [6002, 6011], "container": true, "type": "related_section", "id": "related"}], "summary": ["Generates a Volume mask from a particle fluid simulation."], "type": "root", "attrs": {"index": "no", "version": null, "tags": "fluid, surface, ocean", "since": "16.0", "namespace": null, "internal": "particlefluidmask", "context": "sop", "type": "node", "icon": "SOP/particlefluidmask"}, "title": ["Particle Fluid Mask"]}