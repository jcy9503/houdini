{"body": [{"indent": 0, "text": ["Crowd Solver"], "type": "title", "extent": [89, 106], "level": 0}, {"indent": 0, "type": "summary", "extent": [106, 208], "text": ["Update crowd agents based on the custom steerforces and adjusting animation playback of clips"]}, {"indent": 0, "type": "para", "extent": [208, 701], "text": ["Crowd Solver is used to integrate custom steerforces as well as set animation data that is used by agents. The steer forces use custom weights to control their overall effect. The weighting is normalized based on all of the steer forces. The main attributes driving the animation behavior are the ", {"text": ["clipnames"], "type": "code"}, " (names of the current clips being played), ", {"text": ["cliptimes"], "type": "code"}, " (current time of the clip being played) and ", {"text": ["clipweights"], "type": "code"}, " (weights when blending multiple clips together in state transitions)."]}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [727, 766], "text": ["Start frame of the simulation."]}], "indent": 0, "text": ["Start Frame"], "role": "item", "extent": [713, 727], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}, {"body": [{"body": [{"body": [{"body": [{"body": [{"indent": 8, "type": "para", "extent": [830, 985], "text": ["Minimum speed of the agent before change of orientation can occur (this will prevent agents flipping/jittering back and forth at very low speeds)."]}], "indent": 4, "text": ["Min Speed"], "extent": [815, 830], "container": true, "type": "dt"}], "container": true, "type": "dt_group"}], "indent": 0, "text": ["Orientation Constraint"], "role": "item", "extent": [790, 815], "container": true, "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [1003, 1265], "text": ["The speed of the agent will be scaled based on agent orientation/facing direction and velocity direction. Value of zero will result in speed unaffected, where at ", {"text": ["Max Angle"], "type": "ui"}, " the speed will be zero. Any values in between will be linearly scaled 0 to 1."]}, {"body": [{"body": [{"indent": 9, "type": "para", "extent": [1280, 1361], "text": ["Minimum angle between agent and its velocity when speed is at its full."]}], "indent": 4, "text": ["Min Angle"], "extent": [1265, 1280], "container": true, "type": "dt"}, {"body": [{"indent": 8, "type": "para", "extent": [1376, 1451], "text": ["Maximum angle between agent and it\u2019s velocity where speed is zero."]}], "indent": 4, "text": ["Max Angle"], "extent": [1361, 1376], "container": true, "type": "dt"}, {"body": [{"indent": 8, "type": "para", "extent": [1461, 1506], "text": ["Overall drag applied to the agents."]}], "indent": 4, "text": ["Drag"], "extent": [1451, 1461], "container": true, "type": "dt"}], "container": true, "type": "dt_group"}], "indent": 0, "text": ["Speed Constraint"], "role": "item", "extent": [985, 1003], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 2, "text": ["Particle Behavior"], "extent": [766, 790], "container": true, "type": "h", "id": null}, {"body": [{"indent": 0, "type": "para", "extent": [1522, 1625], "text": ["This controls affect how the agent interact with each other to prevent/avoid self intersections."]}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [1643, 1865], "text": ["This will force the agent to keep separate of each other preventing self intersections when they are within the search radius. It\u2019s used to resolve collisions that are created when agents are very close to each other."]}], "indent": 0, "text": ["Agent Separation"], "role": "item", "extent": [1625, 1643], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [1878, 1927], "text": ["Allows user to specify a subgroup of agents."]}], "indent": 0, "text": ["Agent Group"], "role": "item", "extent": [1865, 1878], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [1935, 2050], "text": ["Weighting of the force used to prevent intersections (higher values will cause the force to have more effect)."]}], "indent": 0, "text": ["Weight"], "role": "item", "extent": [1927, 1935], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2063, 2201], "text": ["Scale of the force used to separate the agents; direction is away from the overall group of agents which are affecting current agent."]}], "indent": 0, "text": ["Force Scale"], "role": "item", "extent": [2050, 2063], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2216, 2328], "text": ["Scale of the force used to slow down the agent; direction is opposite of the current velocity of the agent."]}], "indent": 0, "text": ["Braking Force"], "role": "item", "extent": [2201, 2216], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2347, 2480], "text": ["Use field of view when resolving agents. For example with 180 degrees, only agents in front of the current agent will affect it."]}], "indent": 0, "text": ["Use Field of View"], "role": "item", "extent": [2328, 2347], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2495, 2591], "text": ["Angle of the field of view being used by the agent. Direction is in the velocity direction."]}], "indent": 0, "text": ["Field of View"], "role": "item", "extent": [2480, 2495], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2609, 2854], "text": ["Enforce that agents don\u2019t self intersect. Sometimes the Force Scale is insufficient to stop self collisions, this will push the agent to the radius boundary. It may result in popping in very dense areas as agents try to resolve themselves."]}], "indent": 0, "text": ["Force Separation"], "role": "item", "extent": [2591, 2609], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2871, 2975], "text": ["This will force the agents to avoid each other up to a certain distance based on anticipation time."]}], "indent": 0, "text": ["Agent Avoidance"], "role": "item", "extent": [2854, 2871], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2988, 3037], "text": ["Allows user to specify a subgroup of agents."]}], "indent": 0, "text": ["Agent Group"], "role": "item", "extent": [2975, 2988], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3045, 3159], "text": ["Weighting of the force used to prevent intersections. Higher values will cause the force to have more effect."]}], "indent": 0, "text": ["Weight"], "role": "item", "extent": [3037, 3045], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3172, 3251], "text": ["Scale of the force that is used to alter agent path to avoid other agents."]}], "indent": 0, "text": ["Force Scale"], "role": "item", "extent": [3159, 3172], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3270, 3390], "text": ["How far into the future look for possible collisions (this uses current velocity to project the possible distance)."]}], "indent": 0, "text": ["Anticipation Time"], "role": "item", "extent": [3251, 3270], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3413, 3605], "text": ["Controls how much the agent turns away from possible collisions. This value is scaled based on the Anticipation Time; it represents the maximum rotation the agent is allowed per timestep."]}], "indent": 0, "text": ["Anticipation Rotation"], "role": "item", "extent": [3390, 3413], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3627, 3740], "text": ["Scale of the force used to slow down the agent; direction is opposite of the current velocity of the agent."]}], "indent": 0, "text": ["Anticipation Braking"], "role": "item", "extent": [3605, 3627], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 2, "text": ["Avoidance"], "extent": [1506, 1522], "container": true, "type": "h", "id": null}, {"body": [{"indent": 0, "type": "para", "extent": [3754, 3882], "text": ["This controls agent head override (direction the agents are looking at). To create a target ", {"text": ["agentlookat"], "type": "code"}, " DOP should be used."]}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [3897, 3926], "text": ["This enables the effect."]}], "indent": 0, "text": ["Agent Look At"], "role": "item", "extent": [3882, 3897], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3939, 3988], "text": ["Allows user to specify a subgroup of agents."]}], "indent": 0, "text": ["Agent Group"], "role": "item", "extent": [3926, 3939], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4000, 4156], "text": ["Additional offset to the lookat target (depending on rigs some head bones pivots might be set around neck region this will allow to shift the eye line)"]}], "indent": 0, "text": ["Eye Offset"], "role": "item", "extent": [3988, 4000], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4183, 4250], "text": ["This will limit how fast the head turns to face new direction."]}], "indent": 0, "text": ["Limit Head Turn Per Frame"], "role": "item", "extent": [4156, 4183], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4267, 4311], "text": ["How fast the agent head bone can turn."]}], "indent": 0, "text": ["Head Turn Angle"], "role": "item", "extent": [4250, 4267], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 2, "text": ["Look At"], "extent": [3740, 3754], "container": true, "type": "h", "id": null}, {"body": [{"indent": 0, "type": "para", "extent": [4325, 4490], "text": ["This controls how agents are projected on the ground/terrain. It also allows for feet projection on the terrain and agent tilt when navigating uneven terrain."]}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [4508, 4563], "text": ["This will project the agents on the given terrain."]}], "indent": 0, "text": ["Agent Projection"], "role": "item", "extent": [4490, 4508], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4576, 4625], "text": ["Allows user to specify a subgroup of agents."]}], "indent": 0, "text": ["Agent Group"], "role": "item", "extent": [4563, 4576], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4633, 4692], "text": ["Source for the terrain object (SOP path or DOP object)"]}], "indent": 0, "text": ["Source"], "role": "item", "extent": [4625, 4633], "container": true, "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [4698, 4750], "text": ["Controls direction of the agent projection."]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [4772, 4809], "text": ["Use the direction specified."]}], "indent": 4, "text": ["Direction Vector"], "extent": [4750, 4772], "container": true, "type": "dt"}, {"body": [{"indent": 8, "type": "para", "extent": [4827, 4863], "text": ["Use the agent Up attribute."]}], "indent": 4, "text": ["Up Attribute"], "extent": [4809, 4827], "container": true, "type": "dt"}], "container": true, "type": "dt_group"}], "indent": 0, "text": ["Mode"], "role": "item", "extent": [4692, 4698], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4871, 4932], "text": ["Additional offset that will shift all agents up or down."]}], "indent": 0, "text": ["Offset"], "role": "item", "extent": [4863, 4871], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4953, 5014], "text": ["This controls how feet/terrain penetrations is resolved."]}], "indent": 0, "text": ["Agent Feet Adaption"], "role": "item", "extent": [4932, 4953], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [5027, 5076], "text": ["Allows user to specify a subgroup of agents."]}], "indent": 0, "text": ["Agent Group"], "role": "item", "extent": [5014, 5027], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [5090, 5153], "text": ["Height of the ankle pivot position relative to the ground."]}], "indent": 0, "text": ["Ankle Offset"], "role": "item", "extent": [5076, 5090], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [5165, 5226], "text": ["Height of the toe pivot position relative to the ground."]}], "indent": 0, "text": ["Toe Offset"], "role": "item", "extent": [5153, 5165], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [5248, 5313], "text": ["How fast the agent can lean when moving over uneven terrain."]}], "indent": 0, "text": ["Lean Angle Per Frame"], "role": "item", "extent": [5226, 5248], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [5328, 5385], "text": ["Minimum backwards tilt when walking down an incline."]}], "indent": 0, "text": ["Backward Lean"], "role": "item", "extent": [5313, 5328], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [5399, 5454], "text": ["Maximum forwards tilt when walking up an incline."]}], "indent": 0, "text": ["Forward Lean"], "role": "item", "extent": [5385, 5399], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 2, "text": ["Terrain"], "extent": [4311, 4325], "container": true, "type": "h", "id": null}, {"body": [{"indent": 0, "type": "para", "extent": [5479, 5558], "text": ["This controls how the agent animation clips are played (speed/retiming)."]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [5566, 5629], "text": ["Lets user specify how the animation should be handled."]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [5663, 5880], "text": ["Locks the speed of the agent particle to the original mocap locomotion speed. For this option to work, the agent has to be baked with ", {"text": ["Convert to inplace animation"], "type": "ui"}, " option on the ", {"text": ["Agent ROP"], "fullpath": "/nodes/out/agent", "scheme": "Node", "type": "link", "value": "/nodes/out/agent"}, "."]}], "indent": 4, "text": ["Lock Particle Speed To Mocap"], "extent": [5629, 5663], "container": true, "type": "dt"}, {"body": [{"indent": 8, "type": "para", "extent": [5916, 6067], "text": ["The animation clip is retimed based on the agent particle speed and inplace animation speed, set on the ", {"text": ["Crowd State DOP"], "fullpath": "/nodes/dop/crowdstate", "scheme": "Node", "type": "link", "value": "/nodes/dop/crowdstate"}, "."]}], "indent": 4, "text": ["Retime Mocap To Particle Speed"], "extent": [5880, 5916], "container": true, "type": "dt"}, {"body": [{"indent": 8, "type": "para", "extent": [6090, 6145], "text": ["This will disable any animation clip retiming."]}], "indent": 4, "text": ["Retiming Disabled"], "extent": [6067, 6090], "container": true, "type": "dt"}], "container": true, "type": "dt_group"}], "indent": 0, "text": ["Method"], "role": "item", "extent": [5558, 5566], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [6163, 6316], "text": ["Lets user limit how much the animation is retimed. This will effectively set min/max speeds for the agents based around the inplace animation speed."]}], "indent": 0, "text": ["Allowed Variance"], "role": "item", "extent": [6145, 6163], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [6337, 6438], "text": ["The lookup curve that is used when animation transitions from source state to destination state."]}], "indent": 0, "text": ["Source Blend Lookup"], "role": "item", "extent": [6316, 6337], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [6464, 6566], "text": ["The lookup curve that is used when animation transitions from source state to destination state."]}], "indent": 0, "text": ["Destination Blend Lookup"], "role": "item", "extent": [6438, 6464], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 2, "text": ["Animation Behavior"], "extent": [5454, 5479], "container": true, "type": "h", "id": null}], "indent": 0, "level": 1, "text": "Parameters", "role": "section", "extent": [701, 713], "container": true, "type": "parameters_section", "id": "parameters"}, {"body": [{"indent": 4, "type": "para", "extent": [6574, 6643], "text": ["Crowd Source object, Crowd State nodes, Crowd Transition nodes."]}], "indent": 0, "level": 1, "text": "Inputs", "role": "section", "extent": [6566, 6574], "container": true, "type": "inputs_section", "id": "inputs"}, {"body": [{"indent": 4, "type": "para", "extent": [6652, 6675], "text": ["Agent primitives."]}], "indent": 0, "level": 1, "text": "Outputs", "role": "section", "extent": [6643, 6652], "container": true, "type": "outputs_section", "id": "outputs"}, {"body": [{"body": [{"indent": 0, "blevel": 2, "type": "bullet", "extent": [6684, 6707], "text": [{"text": "", "fullpath": "/nodes/sop/agentprep", "scheme": "Node", "type": "link", "value": "/nodes/sop/agentprep"}]}, {"indent": 0, "blevel": 2, "type": "bullet", "extent": [6707, 6731], "text": [{"text": "", "fullpath": "/nodes/dop/crowdstate", "scheme": "Node", "type": "link", "value": "/nodes/dop/crowdstate"}]}], "container": true, "type": "bullet_group"}], "indent": 0, "level": 1, "text": "Related", "role": "section", "extent": [6675, 6684], "container": true, "type": "related_section", "id": "related"}], "summary": ["Update crowd agents based on the custom steerforces and adjusting animation playback of clips"], "type": "root", "attrs": {"since": "14.0", "namespace": null, "version": "", "context": "dop", "type": "node", "internal": "crowdsolver", "icon": "CROWDS/crowdsolver"}, "title": ["Crowd Solver"]}