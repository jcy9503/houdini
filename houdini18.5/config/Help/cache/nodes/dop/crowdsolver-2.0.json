{"body": [{"indent": 0, "text": ["Crowd Solver"], "type": "title", "extent": [103, 120], "level": 0}, {"indent": 0, "type": "summary", "extent": [120, 222], "text": ["Update crowd agents based on the custom steerforces and adjusting animation playback of clips"]}, {"indent": 0, "type": "para", "extent": [222, 715], "text": ["Crowd Solver is used to integrate custom steerforces as well as set animation data that is used by agents. The steer forces use custom weights to control their overall effect. The weighting is normalized based on all of the steer forces. The main attributes driving the animation behavior are the ", {"text": ["clipnames"], "type": "code"}, " (names of the current clips being played), ", {"text": ["cliptimes"], "type": "code"}, " (current time of the clip being played) and ", {"text": ["clipweights"], "type": "code"}, " (weights when blending multiple clips together in state transitions)."]}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [740, 779], "text": ["Start frame of the simulation."]}], "indent": 0, "text": ["Start Frame"], "role": "item", "extent": [727, 740], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [822, 945], "text": ["Specifies whether the embedded POP solver is enabled. This should be disabled when using this solver as a microsolver."]}], "indent": 0, "text": ["Update Particles"], "role": "item", "extent": [803, 822], "container": true, "type": "parameters_item"}, {"body": [{"body": [{"body": [{"indent": 8, "type": "para", "extent": [984, 1139], "text": ["Minimum speed of the agent before change of orientation can occur (this will prevent agents flipping/jittering back and forth at very low speeds)."]}], "indent": 4, "text": ["Min Speed"], "extent": [969, 984], "container": true, "type": "dt"}], "container": true, "type": "dt_group"}], "indent": 0, "text": ["Orientation Constraint"], "role": "item", "extent": [945, 969], "container": true, "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [1157, 1419], "text": ["The speed of the agent will be scaled based on agent orientation/facing direction and velocity direction. Value of zero will result in speed unaffected, where at ", {"text": ["Max Angle"], "type": "ui"}, " the speed will be zero. Any values in between will be linearly scaled 0 to 1."]}, {"body": [{"body": [{"indent": 9, "type": "para", "extent": [1434, 1515], "text": ["Minimum angle between agent and its velocity when speed is at its full."]}], "indent": 4, "text": ["Min Angle"], "extent": [1419, 1434], "container": true, "type": "dt"}, {"body": [{"indent": 8, "type": "para", "extent": [1530, 1605], "text": ["Maximum angle between agent and it\u2019s velocity where speed is zero."]}], "indent": 4, "text": ["Max Angle"], "extent": [1515, 1530], "container": true, "type": "dt"}, {"body": [{"indent": 8, "type": "para", "extent": [1615, 1659], "text": ["Overall drag applied to the agents."]}], "indent": 4, "text": ["Drag"], "extent": [1605, 1615], "container": true, "type": "dt"}], "container": true, "type": "dt_group"}], "indent": 0, "text": ["Speed Constraint"], "role": "item", "extent": [1139, 1157], "container": true, "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [1674, 1719], "text": ["Determines how the Up vector is set."]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [1734, 1786], "text": ["Vector attribute Up is used for orientation"]}], "indent": 4, "text": ["Attribute"], "extent": [1719, 1734], "container": true, "type": "dt"}, {"body": [{"indent": 8, "type": "para", "extent": [1817, 1951], "text": ["Up vector is rotated to be perpendicular to velocity vector. Useful when agents such as birds are moving around in 3d space."]}], "indent": 4, "text": ["Perpendicular to Velocity"], "extent": [1786, 1817], "container": true, "type": "dt"}], "container": true, "type": "dt_group"}], "indent": 0, "text": ["Up Constraint"], "role": "item", "extent": [1659, 1674], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 2, "text": ["Particle Behavior"], "extent": [779, 803], "container": true, "type": "h", "id": null}, {"body": [{"indent": 0, "type": "para", "extent": [1967, 2066], "text": ["This controls affect how the agent interact with each other to prevent/avoid self intersections."]}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [2083, 2214], "text": ["This will generate an avoidance force that causes the agents to avoid each other based on their anticipated time to collision."]}], "indent": 0, "text": ["Agent Avoidance"], "role": "item", "extent": [2066, 2083], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2227, 2276], "text": ["Allows user to specify a subgroup of agents."]}], "indent": 0, "text": ["Agent Group"], "role": "item", "extent": [2214, 2227], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2284, 2398], "text": ["Weighting of the force used to prevent intersections. Higher values will cause the force to have more effect."]}], "indent": 0, "text": ["Weight"], "role": "item", "extent": [2276, 2284], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2411, 2510], "text": ["Scaling factor for the avoidance force that is used to alter agent path to avoid other agents."]}], "indent": 0, "text": ["Force Scale"], "role": "item", "extent": [2398, 2411], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2529, 2850], "text": ["How far into the future an agent will look for possible collisions (this uses current velocity to project the possible distance). The maximum distance for which an agent considers another agent as a neighbor is the minimum of the agent\u2019s current speed multiplied by the Anticipation Time, and the Neighbor Distance. "]}], "indent": 0, "text": ["Anticipation Time"], "role": "item", "extent": [2510, 2529], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2869, 2965], "text": ["Maximum distance an agent searches for other agents when determining agent avoidance force."]}], "indent": 0, "text": ["Neighbor Distance"], "role": "item", "extent": [2850, 2869], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2980, 3087], "text": ["Maximum number of nearest neighbors to an agent to consider when computing the agent avoidance force."]}], "indent": 0, "text": ["Max Neighbors"], "role": "item", "extent": [2965, 2980], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 2, "text": ["Avoidance"], "extent": [1951, 1967], "container": true, "type": "h", "id": null}, {"body": [{"indent": 0, "type": "para", "extent": [3101, 3229], "text": ["This controls agent head override (direction the agents are looking at). To create a target ", {"text": ["agentlookat"], "type": "code"}, " DOP should be used."]}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [3244, 3273], "text": ["This enables the effect."]}], "indent": 0, "text": ["Agent Look At"], "role": "item", "extent": [3229, 3244], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3286, 3335], "text": ["Allows user to specify a subgroup of agents."]}], "indent": 0, "text": ["Agent Group"], "role": "item", "extent": [3273, 3286], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3347, 3503], "text": ["Additional offset to the lookat target (depending on rigs some head bones pivots might be set around neck region this will allow to shift the eye line)"]}], "indent": 0, "text": ["Eye Offset"], "role": "item", "extent": [3335, 3347], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3530, 3597], "text": ["This will limit how fast the head turns to face new direction."]}], "indent": 0, "text": ["Limit Head Turn Per Frame"], "role": "item", "extent": [3503, 3530], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3614, 3658], "text": ["How fast the agent head bone can turn."]}], "indent": 0, "text": ["Head Turn Angle"], "role": "item", "extent": [3597, 3614], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 2, "text": ["Look At"], "extent": [3087, 3101], "container": true, "type": "h", "id": null}, {"body": [{"indent": 0, "type": "para", "extent": [3672, 3833], "text": ["This controls how agents are projected on the ground/terrain. It also allows for feet projection on the terrain and agent tilt when navigating uneven terrain."]}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [3851, 3906], "text": ["This will project the agents on the given terrain."]}], "indent": 0, "text": ["Agent Projection"], "role": "item", "extent": [3833, 3851], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3919, 3968], "text": ["Allows user to specify a subgroup of agents."]}], "indent": 0, "text": ["Agent Group"], "role": "item", "extent": [3906, 3919], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3976, 4035], "text": ["Source for the terrain object (SOP path or DOP object)"]}], "indent": 0, "text": ["Source"], "role": "item", "extent": [3968, 3976], "container": true, "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [4041, 4093], "text": ["Controls direction of the agent projection."]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [4115, 4152], "text": ["Use the direction specified."]}], "indent": 4, "text": ["Direction Vector"], "extent": [4093, 4115], "container": true, "type": "dt"}, {"body": [{"indent": 8, "type": "para", "extent": [4170, 4206], "text": ["Use the agent Up attribute."]}], "indent": 4, "text": ["Up Attribute"], "extent": [4152, 4170], "container": true, "type": "dt"}], "container": true, "type": "dt_group"}], "indent": 0, "text": ["Mode"], "role": "item", "extent": [4035, 4041], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4214, 4275], "text": ["Additional offset that will shift all agents up or down."]}], "indent": 0, "text": ["Offset"], "role": "item", "extent": [4206, 4214], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4296, 4357], "text": ["This controls how feet/terrain penetrations is resolved."]}], "indent": 0, "text": ["Agent Feet Adaption"], "role": "item", "extent": [4275, 4296], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4370, 4419], "text": ["Allows user to specify a subgroup of agents."]}], "indent": 0, "text": ["Agent Group"], "role": "item", "extent": [4357, 4370], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4433, 4496], "text": ["Height of the ankle pivot position relative to the ground."]}], "indent": 0, "text": ["Ankle Offset"], "role": "item", "extent": [4419, 4433], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4508, 4569], "text": ["Height of the toe pivot position relative to the ground."]}], "indent": 0, "text": ["Toe Offset"], "role": "item", "extent": [4496, 4508], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4591, 4656], "text": ["How fast the agent can lean when moving over uneven terrain."]}], "indent": 0, "text": ["Lean Angle Per Frame"], "role": "item", "extent": [4569, 4591], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4671, 4728], "text": ["Minimum backwards tilt when walking down an incline."]}], "indent": 0, "text": ["Backward Lean"], "role": "item", "extent": [4656, 4671], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4742, 4797], "text": ["Maximum forwards tilt when walking up an incline."]}], "indent": 0, "text": ["Forward Lean"], "role": "item", "extent": [4728, 4742], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 2, "text": ["Terrain"], "extent": [3658, 3672], "container": true, "type": "h", "id": null}, {"body": [{"indent": 4, "type": "para", "extent": [4822, 4899], "text": ["This controls how the agent animation clips are played (speed/retiming)."]}], "indent": 0, "level": 2, "text": ["Animation Behavior"], "extent": [4797, 4822], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [4914, 5005], "text": ["These controls affect the animation that is played when using 'inplace' animation."]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [5028, 5176], "text": ["This sets how much the speed of the agent can vary with respect to the Inplace Gate Speed set on the ", {"text": ["Crowd State DOP"], "fullpath": "/nodes/dop/crowdstate", "scheme": "Node", "type": "link", "value": "/nodes/dop/crowdstate"}, "."]}], "indent": 4, "text": ["Allowed Variance"], "extent": [5005, 5028], "container": true, "type": "dt"}], "container": true, "type": "dt_group"}], "indent": 0, "text": ["Inplace Mocap"], "role": "item", "extent": [4899, 4914], "container": true, "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [5194, 5288], "text": ["These controls affect the animation that is played when using 'locomotive' animation."]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [5309, 5602], "text": ["Determines mocap influence on the overall movment of the agent. When agent animation is baked as locomotive, the gross world movement/orientation of the agent is removed from original animation and saved as separate ", {"text": ["locomotion"], "type": "em"}, " data. This control will apply that motion to the agent."]}], "indent": 4, "text": ["Mocap Influence"], "extent": [5288, 5309], "container": true, "type": "dt"}, {"body": [{"indent": 8, "type": "para", "extent": [5621, 5722], "text": ["Determines how much existing forces in the crowd simulation will affect the agent movement. "]}], "indent": 4, "text": ["Sim Influence"], "extent": [5602, 5621], "container": true, "type": "dt"}], "container": true, "type": "dt_group"}], "indent": 0, "text": ["Locomotion Mocap"], "role": "item", "extent": [5176, 5194], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [5743, 5844], "text": ["The lookup curve that is used when animation transitions from source state to destination state."]}], "indent": 0, "text": ["Source Blend Lookup"], "role": "item", "extent": [5722, 5743], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [5870, 5972], "text": ["The lookup curve that is used when animation transitions from source state to destination state."]}], "indent": 0, "text": ["Destination Blend Lookup"], "role": "item", "extent": [5844, 5870], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [6002, 6075], "text": ["The POP solver will always enforce this minimum number of substeps."]}, {"indent": 4, "type": "para", "extent": [6075, 6123], "text": ["This should only rarely need to be changed."]}], "indent": 0, "text": ["Min Substeps"], "role": "item", "extent": [5987, 6002], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [6137, 6233], "text": ["The POP solver will not break the simulation down in to more\n    substeps than this value."]}], "indent": 0, "text": ["Max Substeps"], "role": "item", "extent": [6123, 6137], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [6248, 6444], "text": ["The CFL condition is a factor used to automatically determine what\n    size substep the scene requires. The idea is to control the distance\n    that a particle can travel in a given substep."]}, {"indent": 4, "type": "para", "extent": [6444, 6647], "text": ["For example, when this parameter is set to 0.5, the solver will set\n    the length of each substep such that no particle travels more than\n    50% of the size of the smallest particle in a substep."]}], "indent": 0, "text": ["CFL Condition"], "role": "item", "extent": [6233, 6248], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [6673, 7033], "text": ["Always use substeps that divide up the frame by ", {"text": ["Max Substeps"], "type": "ui"}, ".  For example,\n    if ", {"text": ["Max Substeps"], "type": "ui"}, " is set to 4, but the ", {"text": ["CFL Condition"], "type": "ui"}, " only requires 3 substeps,\n    the solver will take frame steps of 0.25, 0.5, and 0.25.  This option can be useful for\n    re-using input geometry that has been cached to file at increments of 1/", {"text": ["Max Substeps"], "type": "ui"}, "."]}], "indent": 0, "text": ["Quantize to Max Substeps"], "role": "item", "extent": [6647, 6673], "container": true, "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [7045, 7144], "text": ["An overall scale applied to the actual timestep. This parameter can be animated."]}], "indent": 0, "text": ["Time Scale"], "role": "item", "extent": [7033, 7045], "container": true, "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 2, "text": ["Substeps"], "extent": [5972, 5987], "container": true, "type": "h", "id": null}], "indent": 0, "level": 1, "text": "Parameters", "role": "section", "extent": [715, 727], "container": true, "type": "parameters_section", "id": "parameters"}, {"body": [{"indent": 4, "type": "para", "extent": [7152, 7221], "text": ["Crowd Source object, Crowd State nodes, Crowd Transition nodes."]}], "indent": 0, "level": 1, "text": "Inputs", "role": "section", "extent": [7144, 7152], "container": true, "type": "inputs_section", "id": "inputs"}, {"body": [{"indent": 4, "type": "para", "extent": [7230, 7253], "text": ["Agent primitives."]}], "indent": 0, "level": 1, "text": "Outputs", "role": "section", "extent": [7221, 7230], "container": true, "type": "outputs_section", "id": "outputs"}, {"body": [{"body": [{"indent": 0, "blevel": 2, "type": "bullet", "extent": [7262, 7285], "text": [{"text": "", "fullpath": "/nodes/sop/agentprep", "scheme": "Node", "type": "link", "value": "/nodes/sop/agentprep"}]}, {"indent": 0, "blevel": 2, "type": "bullet", "extent": [7285, 7309], "text": [{"text": "", "fullpath": "/nodes/dop/crowdstate", "scheme": "Node", "type": "link", "value": "/nodes/dop/crowdstate"}]}], "container": true, "type": "bullet_group"}], "indent": 0, "level": 1, "text": "Related", "role": "section", "extent": [7253, 7262], "container": true, "type": "related_section", "id": "related"}], "summary": ["Update crowd agents based on the custom steerforces and adjusting animation playback of clips"], "type": "root", "attrs": {"version": "2.0", "since": "14.5", "namespace": null, "internal": "crowdsolver", "context": "dop", "type": "node", "icon": "CROWDS/crowdsolver"}, "title": ["Crowd Solver"]}